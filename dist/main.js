(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){let t=document.querySelector("#newTask"),n=document.querySelector("#date"),r=document.createElement("div");r.classList.add("task");let o=document.createElement("span");o.textContent=e.name,o.id="taskName";let a=document.createElement("span");a.textContent=e.date,a.id="taskDate";let i=document.createElement("div");i.textContent=e.urgency,i.id="taskUrgency";let d=document.createElement("img");d.src="../dist/edit.png",d.setAttribute("id","taskIcon"),d.addEventListener("click",(()=>{!function(e){let t=document.createElement("div");t.classList.add("editTodo");let n=document.createElement("input");n.id="editTodoName",n.type="text",n.placeholder="New name",n.required=!0;let r=document.createElement("input");r.id="editTodoDate",r.type="date",r.required=!0;let o=document.createElement("select");o.id="editTodoUrgency";let a=document.createElement("option");a.value="urgent",a.textContent="Urgent";let i=document.createElement("option");i.value="nonurgent",i.textContent="Nonurgent",o.appendChild(a),o.appendChild(i);let d=document.createElement("button");d.id="editButton",d.type="button",d.textContent="Update",d.addEventListener("click",(()=>{e=function(e){let t=document.querySelector("#editTodoName"),n=document.querySelector("#editTodoDate"),r=document.querySelector("#editTodoUrgency");return e.name=t.value,e.date=n.value,e.urgency=r.value,e}(e),l.removeChild(c),l.removeChild(t);let n=T(),r=w();console.log(n.id),y(n.id,r),localStorage.setItem("projects",JSON.stringify(r))})),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(d);let c=document.createElement("div");c.classList.add("overlay");let l=document.getElementsByTagName("body")[0];l.appendChild(c),l.appendChild(t)}(e)}));let c=document.createElement("img");c.src="../dist/remove.png",c.setAttribute("id","taskIcon"),c.addEventListener("click",(()=>{!function(e){let t=T(),n=t.todos.find((t=>t.index==e)).index;t.todos.splice(n,1);let r=0;t.todos.forEach((e=>{e.index=r,r++}));let o=w();y(t.id,o),localStorage.setItem("projects",JSON.stringify(o))}(e.index)})),r.appendChild(o),r.appendChild(a),r.appendChild(i),r.appendChild(d),r.appendChild(c),document.querySelector(".allTodos").appendChild(r),t.value="",n.value=""}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){r(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===n(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}e.d({},{vo:()=>T,mW:()=>w,$w:()=>D,id:()=>C}),Math.pow(10,8);var a=6e4,i=36e5;function d(e,t){var n;r(1,arguments);var o=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var d,y=function(e){var t,n={},r=e.split(c.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],c.timeZoneDelimiter.test(n.date)&&(n.date=e.split(c.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=c.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(y.date){var v=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(y.date,o);d=function(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var r=!!n[4],o=m(n[1]),a=m(n[2])-1,i=m(n[3]),d=m(n[4]),c=m(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,d,c)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,d,c):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(g[t]||(f(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,o)?(u.setUTCFullYear(t,a,Math.max(o,i)),u):new Date(NaN)}(v.restDateString,v.year)}if(!d||isNaN(d.getTime()))return new Date(NaN);var S,N=d.getTime(),h=0;if(y.time&&(h=function(e){var t=e.match(u);if(!t)return NaN;var n=p(t[1]),r=p(t[2]),o=p(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*i+r*a+1e3*o:NaN}(y.time),isNaN(h)))return new Date(NaN);if(!y.timezone){var E=new Date(N+h),T=new Date(0);return T.setFullYear(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate()),T.setHours(E.getUTCHours(),E.getUTCMinutes(),E.getUTCSeconds(),E.getUTCMilliseconds()),T}return S=function(e){if("Z"===e)return 0;var t=e.match(s);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*i+o*a):NaN}(y.timezone),isNaN(S)?new Date(NaN):new Date(N+h+S)}var c={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var g=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400==0||e%4==0&&e%100!=0}function y(e,n){document.getElementById(e).classList="projectFocused";let a=n[e];return document.querySelector(".allTodos").innerHTML="",a=function(e){return e.todos.sort(((e,t)=>function(e,t){r(2,arguments);var n=o(e),a=o(t),i=n.getTime()-a.getTime();return i<0?-1:i>0?1:i}(d(e.date),d(t.date)))),e}(a),a.todos.forEach((e=>{t(e)})),D(a),a}const v=(e,t)=>({name:e,todos:[],id:t});function S(e,t){let n=document.createElement("div");n.classList.add("addedProject"),n.setAttribute("id",t);let r=document.createElement("span");r.textContent=e,r.addEventListener("click",(e=>{y(e.target.parentElement.id,w())}));let o=document.createElement("img");return o.src="remove.png",o.setAttribute("id","removeIcon"),o.addEventListener("click",(()=>{console.log(t),function(e){let t=w(),n=t.findIndex((t=>t.id==e));t.splice(n,1),C(t),document.querySelector(".allProjects").innerHTML="";let r=0;t.forEach((e=>{S(e.name,r),r++})),localStorage.setItem("projects",JSON.stringify(t))}(t)})),n.appendChild(r),n.appendChild(o),document.querySelector(".allProjects").appendChild(n),v(e,t)}let N=JSON.parse(localStorage.getItem("projects"))||[],h=JSON.parse(localStorage.getItem("currentProject"))||v("currentProject",0);console.log(N);let E=0;function T(){return h}function w(){return N}function C(e){N=e}function D(e){h=e}N.forEach((e=>{e.id=E,S(e.name,E),y(h.id,N),E++})),document.querySelector("#projectButton").addEventListener("click",(()=>{if(""!=document.querySelector("#newProject").value){let e=document.querySelector("#newProject");console.log(E);let t=S(e.value,E);N.push(t),localStorage.setItem("projects",JSON.stringify(N)),e.value="",E++}})),document.querySelector("#todoButton").addEventListener("click",(e=>{if(""!=document.querySelector("#newTask").value){let e={name:document.querySelector("#newTask").value,date:document.querySelector("#date").value,urgency:document.querySelector("#urgency").value,index:T().todos.length};h.todos.push(e),t(e),localStorage.setItem("projects",JSON.stringify(N)),y(h.id,N)}else document.querySelector("#newTask").value="Enter task name",document.querySelector("#newTask").addEventListener("click",(()=>{document.querySelector("#newTask").value=""}))})),document.addEventListener("mousedown",(e=>{let t=document.querySelector(".projectFocused");e.target.parentElement&&e.target.parentElement.classList.contains("addedProject")&&t&&document.querySelectorAll(".projectFocused").forEach((e=>{e.classList="addedProject"}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5Q0QsR0FFVzNNLFNBQVM2TSxpQkFBaUIsbUJBQ2hDckosU0FBU3JELElBQ1pBLEVBQUlFLFVBQVksY0FBYyxHQUVsQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NyZWF0ZVRvZG9EaXYuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2VkaXRUb2RvLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy91cGRhdGVUb2RvSW5mby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZGVsZXRlVG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9jb25zdGFudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9wYXJzZUlTTy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9zZWxlY3RQcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9zb3J0VG9kb3MuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9jb21wYXJlQXNjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVQcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVQcm9qZWN0RGl2LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kZWxldGVQcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY3JlYXRlVG9kby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBkZWxldGVUb2RvIGZyb20gXCIuL2RlbGV0ZVRvZG9cIjtcbmltcG9ydCBlZGl0VG9kbyBmcm9tIFwiLi9lZGl0VG9kb1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUb2RvRGl2KHRvZG8pIHtcbiAgICBcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJyk7XG4gICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpO1xuXG4gICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrJyk7XG5cbiAgICBsZXQgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0b2RvLm5hbWU7XG4gICAgdGFza05hbWUuaWQgPSAndGFza05hbWUnO1xuXG4gICAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRhc2tEYXRlLnRleHRDb250ZW50ID0gdG9kby5kYXRlO1xuICAgIHRhc2tEYXRlLmlkID0gJ3Rhc2tEYXRlJztcblxuICAgIGxldCB0YXNrVXJnZW5jeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tVcmdlbmN5LnRleHRDb250ZW50ID0gdG9kby51cmdlbmN5O1xuICAgIHRhc2tVcmdlbmN5LmlkID0gJ3Rhc2tVcmdlbmN5JztcblxuICAgIGxldCBlZGl0SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgZWRpdEltZy5zcmMgPSAnLi4vZGlzdC9lZGl0LnBuZyc7XG4gICAgZWRpdEltZy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2tJY29uJyk7XG4gICAgZWRpdEltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZWRpdFRvZG8odG9kbyk7XG4gICAgfSlcblxuICAgIGxldCByZW1vdmVJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICByZW1vdmVJbWcuc3JjID0gJy4uL2Rpc3QvcmVtb3ZlLnBuZyc7XG4gICAgcmVtb3ZlSW1nLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFza0ljb24nKTtcbiAgICByZW1vdmVJbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGRlbGV0ZVRvZG8odG9kby5pbmRleCk7XG4gICAgfSlcblxuICAgIFxuICAgIGRpdi5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG4gICAgZGl2LmFwcGVuZENoaWxkKHRhc2tEYXRlKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQodGFza1VyZ2VuY3kpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChlZGl0SW1nKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQocmVtb3ZlSW1nKTtcblxuICAgIGxldCBkaXNwbGF5RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbFRvZG9zJyk7XG4gICAgZGlzcGxheURpdi5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgbmFtZS52YWx1ZSA9ICcnO1xuICAgIGRhdGUudmFsdWUgPSAnJztcbn0iLCJpbXBvcnQgdXBkYXRlVG9kb0luZm8gZnJvbSBcIi4vdXBkYXRlVG9kb0luZm9cIjtcbmltcG9ydCB7IGdldEN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGdldFByb2plY3RzIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBzZWxlY3RQcm9qZWN0IGZyb20gXCIuL3NlbGVjdFByb2plY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWRpdFRvZG8odG9kbykge1xuXG4gIGxldCBlZGl0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGVkaXRGb3JtLmNsYXNzTGlzdC5hZGQoXCJlZGl0VG9kb1wiKTtcblxuICBsZXQgbmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBuYW1lSW5wdXQuaWQgPSBcImVkaXRUb2RvTmFtZVwiO1xuICBuYW1lSW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICBuYW1lSW5wdXQucGxhY2Vob2xkZXIgPSBcIk5ldyBuYW1lXCI7XG4gIG5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgbGV0IGRhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgZGF0ZUlucHV0LmlkID0gXCJlZGl0VG9kb0RhdGVcIjtcbiAgZGF0ZUlucHV0LnR5cGUgPSBcImRhdGVcIjtcbiAgZGF0ZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcblxuICBsZXQgdXJnZW5jeURyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgdXJnZW5jeURyb3Bkb3duLmlkID0gXCJlZGl0VG9kb1VyZ2VuY3lcIjtcblxuICBsZXQgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIG9wdGlvbjEudmFsdWUgPSBcInVyZ2VudFwiO1xuICBvcHRpb24xLnRleHRDb250ZW50ID0gXCJVcmdlbnRcIjsgIFxuICBsZXQgb3B0aW9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIG9wdGlvbjIudmFsdWUgPSBcIm5vbnVyZ2VudFwiO1xuICBvcHRpb24yLnRleHRDb250ZW50ID0gXCJOb251cmdlbnRcIjtcbiAgdXJnZW5jeURyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbjEpO1xuICB1cmdlbmN5RHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uMik7XG5cbiAgbGV0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBlZGl0QnV0dG9uLmlkID0gXCJlZGl0QnV0dG9uXCI7XG4gIGVkaXRCdXR0b24udHlwZSA9IFwiYnV0dG9uXCI7XG4gIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiO1xuXG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0b2RvID0gdXBkYXRlVG9kb0luZm8odG9kbyk7XG4gICAgYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICBib2R5LnJlbW92ZUNoaWxkKGVkaXRGb3JtKTtcbiAgICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGxldCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gICAgY29uc29sZS5sb2coY3VycmVudFByb2plY3QuaWQpO1xuICAgIHNlbGVjdFByb2plY3QoY3VycmVudFByb2plY3QuaWQsIHByb2plY3RzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gIH0pO1xuXG4gIGVkaXRGb3JtLmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gIGVkaXRGb3JtLmFwcGVuZENoaWxkKGRhdGVJbnB1dCk7XG4gIGVkaXRGb3JtLmFwcGVuZENoaWxkKHVyZ2VuY3lEcm9wZG93bik7XG4gIGVkaXRGb3JtLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuXG4gIGxldCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheVwiKTtcblxuICBsZXQgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcbiAgYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgYm9keS5hcHBlbmRDaGlsZChlZGl0Rm9ybSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGRhdGVUb2RvSW5mbyh0b2RvKSB7XG4gICAgbGV0IG5ld05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdFRvZG9OYW1lJyk7XG4gICAgbGV0IG5ld0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdFRvZG9EYXRlJyk7XG4gICAgbGV0IG5ld1VyZ2VuY3kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdFRvZG9VcmdlbmN5Jyk7XG5cbiAgICB0b2RvLm5hbWUgPSBuZXdOYW1lLnZhbHVlO1xuICAgIHRvZG8uZGF0ZSA9IG5ld0RhdGUudmFsdWU7XG4gICAgdG9kby51cmdlbmN5ID0gbmV3VXJnZW5jeS52YWx1ZTtcbiAgICByZXR1cm4gdG9kbztcbn0iLCJpbXBvcnQgeyBnZXRDdXJyZW50UHJvamVjdCwgZ2V0UHJvamVjdHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHNlbGVjdFByb2plY3QgZnJvbSBcIi4vc2VsZWN0UHJvamVjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWxldGVUb2RvKGluZGV4KSB7XG4gIFxuICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBsZXQgdG9kb1RvRGVsZXRlID0gY3VycmVudFByb2plY3QudG9kb3MuZmluZCgodG9kbykgPT4gdG9kby5pbmRleCA9PSBpbmRleCk7XG5cbiAgbGV0IHRvZG9JbmRleCA9IHRvZG9Ub0RlbGV0ZS5pbmRleDtcbiAgY3VycmVudFByb2plY3QudG9kb3Muc3BsaWNlKHRvZG9JbmRleCwgMSk7XG5cblxuICBsZXQgaSA9IDA7XG4gIGN1cnJlbnRQcm9qZWN0LnRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcbiAgICB0b2RvLmluZGV4ID0gaTtcbiAgICBpKys7XG4gIH0pO1xuXG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gIHNlbGVjdFByb2plY3QoY3VycmVudFByb2plY3QuaWQsIGFsbFByb2plY3RzKTtcbiAgXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICB9LCBfdHlwZW9mKG9iaik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpO1xuXG4gIC8vIENsb25lIHRoZSBkYXRlXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZihhcmd1bWVudCkgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiLyoqXG4gKiBEYXlzIGluIDEgd2Vlay5cbiAqXG4gKiBAbmFtZSBkYXlzSW5XZWVrXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIGRheXNJbldlZWsgPSA3O1xuXG4vKipcbiAqIERheXMgaW4gMSB5ZWFyXG4gKiBPbmUgeWVhcnMgZXF1YWxzIDM2NS4yNDI1IGRheXMgYWNjb3JkaW5nIHRvIHRoZSBmb3JtdWxhOlxuICpcbiAqID4gTGVhcCB5ZWFyIG9jY3VyZXMgZXZlcnkgNCB5ZWFycywgZXhjZXB0IGZvciB5ZWFycyB0aGF0IGFyZSBkaXZpc2FibGUgYnkgMTAwIGFuZCBub3QgZGl2aXNhYmxlIGJ5IDQwMC5cbiAqID4gMSBtZWFuIHllYXIgPSAoMzY1KzEvNC0xLzEwMCsxLzQwMCkgZGF5cyA9IDM2NS4yNDI1IGRheXNcbiAqXG4gKiBAbmFtZSBkYXlzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIGRheXNJblllYXIgPSAzNjUuMjQyNTtcblxuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtYXhUaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1heFRpbWUgPSBNYXRoLnBvdygxMCwgOCkgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luTWludXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luTWludXRlID0gNjAwMDA7XG5cbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJbkhvdXIgPSAzNjAwMDAwO1xuXG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIHNlY29uZFxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMTAwMDtcblxuLyoqXG4gKiBNaW5pbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtaW5UaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1pblRpbWUgPSAtbWF4VGltZTtcblxuLyoqXG4gKiBNaW51dGVzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWludXRlc0luSG91ciA9IDYwO1xuXG4vKipcbiAqIE1vbnRocyBpbiAxIHF1YXJ0ZXJcbiAqXG4gKiBAbmFtZSBtb250aHNJblF1YXJ0ZXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbW9udGhzSW5RdWFydGVyID0gMztcblxuLyoqXG4gKiBNb250aHMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgbW9udGhzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1vbnRoc0luWWVhciA9IDEyO1xuXG4vKipcbiAqIFF1YXJ0ZXJzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIHF1YXJ0ZXJzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHF1YXJ0ZXJzSW5ZZWFyID0gNDtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIHNlY29uZHNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luSG91ciA9IDM2MDA7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5NaW51dGUgPSA2MDtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgZGF5XG4gKlxuICogQG5hbWUgc2Vjb25kc0luRGF5XG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJbkRheSA9IHNlY29uZHNJbkhvdXIgKiAyNDtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgd2Vla1xuICpcbiAqIEBuYW1lIHNlY29uZHNJbldlZWtcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luV2VlayA9IHNlY29uZHNJbkRheSAqIDc7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJblllYXIgPSBzZWNvbmRzSW5EYXkgKiBkYXlzSW5ZZWFyO1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSBtb250aFxuICpcbiAqIEBuYW1lIHNlY29uZHNJbk1vbnRoXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJbk1vbnRoID0gc2Vjb25kc0luWWVhciAvIDEyO1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSBxdWFydGVyXG4gKlxuICogQG5hbWUgc2Vjb25kc0luUXVhcnRlclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5RdWFydGVyID0gc2Vjb25kc0luTW9udGggKiAzOyIsImltcG9ydCB7IG1pbGxpc2Vjb25kc0luSG91ciwgbWlsbGlzZWNvbmRzSW5NaW51dGUgfSBmcm9tIFwiLi4vY29uc3RhbnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgcGFyc2VJU09cbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgUGFyc2UgSVNPIHN0cmluZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBpbiBJU08gODYwMSBmb3JtYXQgYW5kIHJldHVybiBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEZ1bmN0aW9uIGFjY2VwdHMgY29tcGxldGUgSVNPIDg2MDEgZm9ybWF0cyBhcyB3ZWxsIGFzIHBhcnRpYWwgaW1wbGVtZW50YXRpb25zLlxuICogSVNPIDg2MDE6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcsIHRoZSBmdW5jdGlvbiBjYW5ub3QgcGFyc2UgdGhlIHN0cmluZyBvclxuICogdGhlIHZhbHVlcyBhcmUgaW52YWxpZCwgaXQgcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJzIwMTQtMDItMTFUMTE6MzA6MzAnIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBwYXJzZUlTTygnMjAxNC0wMi0xMVQxMTozMDozMCcpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHN0cmluZyAnKzAyMDE0MTAxJyB0byBkYXRlLFxuICogLy8gaWYgdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXQgaXMgMTpcbiAqIGNvbnN0IHJlc3VsdCA9IHBhcnNlSVNPKCcrMDIwMTQxMDEnLCB7IGFkZGl0aW9uYWxEaWdpdHM6IDEgfSlcbiAqIC8vPT4gRnJpIEFwciAxMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlSVNPKGFyZ3VtZW50LCBvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRhZGRpdGlvbmFsRGk7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYWRkaXRpb25hbERpZ2l0cyA9IHRvSW50ZWdlcigoX29wdGlvbnMkYWRkaXRpb25hbERpID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHMpICE9PSBudWxsICYmIF9vcHRpb25zJGFkZGl0aW9uYWxEaSAhPT0gdm9pZCAwID8gX29wdGlvbnMkYWRkaXRpb25hbERpIDogMik7XG4gIGlmIChhZGRpdGlvbmFsRGlnaXRzICE9PSAyICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDEgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhZGRpdGlvbmFsRGlnaXRzIG11c3QgYmUgMCwgMSBvciAyJyk7XG4gIH1cbiAgaWYgKCEodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpID09PSAnW29iamVjdCBTdHJpbmddJykpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuICB2YXIgZGF0ZVN0cmluZ3MgPSBzcGxpdERhdGVTdHJpbmcoYXJndW1lbnQpO1xuICB2YXIgZGF0ZTtcbiAgaWYgKGRhdGVTdHJpbmdzLmRhdGUpIHtcbiAgICB2YXIgcGFyc2VZZWFyUmVzdWx0ID0gcGFyc2VZZWFyKGRhdGVTdHJpbmdzLmRhdGUsIGFkZGl0aW9uYWxEaWdpdHMpO1xuICAgIGRhdGUgPSBwYXJzZURhdGUocGFyc2VZZWFyUmVzdWx0LnJlc3REYXRlU3RyaW5nLCBwYXJzZVllYXJSZXN1bHQueWVhcik7XG4gIH1cbiAgaWYgKCFkYXRlIHx8IGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG4gIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgdmFyIHRpbWUgPSAwO1xuICB2YXIgb2Zmc2V0O1xuICBpZiAoZGF0ZVN0cmluZ3MudGltZSkge1xuICAgIHRpbWUgPSBwYXJzZVRpbWUoZGF0ZVN0cmluZ3MudGltZSk7XG4gICAgaWYgKGlzTmFOKHRpbWUpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH1cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWV6b25lKSB7XG4gICAgb2Zmc2V0ID0gcGFyc2VUaW1lem9uZShkYXRlU3RyaW5ncy50aW1lem9uZSk7XG4gICAgaWYgKGlzTmFOKG9mZnNldCkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlydHlEYXRlID0gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSk7XG4gICAgLy8ganMgcGFyc2VkIHN0cmluZyBhc3N1bWluZyBpdCdzIGluIFVUQyB0aW1lem9uZVxuICAgIC8vIGJ1dCB3ZSBuZWVkIGl0IHRvIGJlIHBhcnNlZCBpbiBvdXIgdGltZXpvbmVcbiAgICAvLyBzbyB3ZSB1c2UgdXRjIHZhbHVlcyB0byBidWlsZCBkYXRlIGluIG91ciB0aW1lem9uZS5cbiAgICAvLyBZZWFyIHZhbHVlcyBmcm9tIDAgdG8gOTkgbWFwIHRvIHRoZSB5ZWFycyAxOTAwIHRvIDE5OTlcbiAgICAvLyBzbyBzZXQgeWVhciBleHBsaWNpdGx5IHdpdGggc2V0RnVsbFllYXIuXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEYXRlKDApO1xuICAgIHJlc3VsdC5zZXRGdWxsWWVhcihkaXJ0eURhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGlydHlEYXRlLmdldFVUQ01vbnRoKCksIGRpcnR5RGF0ZS5nZXRVVENEYXRlKCkpO1xuICAgIHJlc3VsdC5zZXRIb3VycyhkaXJ0eURhdGUuZ2V0VVRDSG91cnMoKSwgZGlydHlEYXRlLmdldFVUQ01pbnV0ZXMoKSwgZGlydHlEYXRlLmdldFVUQ1NlY29uZHMoKSwgZGlydHlEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0KTtcbn1cbnZhciBwYXR0ZXJucyA9IHtcbiAgZGF0ZVRpbWVEZWxpbWl0ZXI6IC9bVCBdLyxcbiAgdGltZVpvbmVEZWxpbWl0ZXI6IC9bWiBdL2ksXG4gIHRpbWV6b25lOiAvKFtaKy1dLiopJC9cbn07XG52YXIgZGF0ZVJlZ2V4ID0gL14tPyg/OihcXGR7M30pfChcXGR7Mn0pKD86LT8oXFxkezJ9KSk/fFcoXFxkezJ9KSg/Oi0/KFxcZHsxfSkpP3wpJC87XG52YXIgdGltZVJlZ2V4ID0gL14oXFxkezJ9KD86Wy4sXVxcZCopPykoPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/KD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyQvO1xudmFyIHRpbWV6b25lUmVnZXggPSAvXihbKy1dKShcXGR7Mn0pKD86Oj8oXFxkezJ9KSk/JC87XG5mdW5jdGlvbiBzcGxpdERhdGVTdHJpbmcoZGF0ZVN0cmluZykge1xuICB2YXIgZGF0ZVN0cmluZ3MgPSB7fTtcbiAgdmFyIGFycmF5ID0gZGF0ZVN0cmluZy5zcGxpdChwYXR0ZXJucy5kYXRlVGltZURlbGltaXRlcik7XG4gIHZhciB0aW1lU3RyaW5nO1xuXG4gIC8vIFRoZSByZWdleCBtYXRjaCBzaG91bGQgb25seSByZXR1cm4gYXQgbWF4aW11bSB0d28gYXJyYXkgZWxlbWVudHMuXG4gIC8vIFtkYXRlXSwgW3RpbWVdLCBvciBbZGF0ZSwgdGltZV0uXG4gIGlmIChhcnJheS5sZW5ndGggPiAyKSB7XG4gICAgcmV0dXJuIGRhdGVTdHJpbmdzO1xuICB9XG4gIGlmICgvOi8udGVzdChhcnJheVswXSkpIHtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMF07XG4gIH0gZWxzZSB7XG4gICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGFycmF5WzBdO1xuICAgIHRpbWVTdHJpbmcgPSBhcnJheVsxXTtcbiAgICBpZiAocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIudGVzdChkYXRlU3RyaW5ncy5kYXRlKSkge1xuICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIpWzBdO1xuICAgICAgdGltZVN0cmluZyA9IGRhdGVTdHJpbmcuc3Vic3RyKGRhdGVTdHJpbmdzLmRhdGUubGVuZ3RoLCBkYXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGlmICh0aW1lU3RyaW5nKSB7XG4gICAgdmFyIHRva2VuID0gcGF0dGVybnMudGltZXpvbmUuZXhlYyh0aW1lU3RyaW5nKTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nLnJlcGxhY2UodG9rZW5bMV0sICcnKTtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWV6b25lID0gdG9rZW5bMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGF0ZVN0cmluZ3M7XG59XG5mdW5jdGlvbiBwYXJzZVllYXIoZGF0ZVN0cmluZywgYWRkaXRpb25hbERpZ2l0cykge1xuICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdeKD86KFxcXFxkezR9fFsrLV1cXFxcZHsnICsgKDQgKyBhZGRpdGlvbmFsRGlnaXRzKSArICd9KXwoXFxcXGR7Mn18WystXVxcXFxkeycgKyAoMiArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pJCknKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChyZWdleCk7XG4gIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG4gIGlmICghY2FwdHVyZXMpIHJldHVybiB7XG4gICAgeWVhcjogTmFOLFxuICAgIHJlc3REYXRlU3RyaW5nOiAnJ1xuICB9O1xuICB2YXIgeWVhciA9IGNhcHR1cmVzWzFdID8gcGFyc2VJbnQoY2FwdHVyZXNbMV0pIDogbnVsbDtcbiAgdmFyIGNlbnR1cnkgPSBjYXB0dXJlc1syXSA/IHBhcnNlSW50KGNhcHR1cmVzWzJdKSA6IG51bGw7XG5cbiAgLy8gZWl0aGVyIHllYXIgb3IgY2VudHVyeSBpcyBudWxsLCBub3QgYm90aFxuICByZXR1cm4ge1xuICAgIHllYXI6IGNlbnR1cnkgPT09IG51bGwgPyB5ZWFyIDogY2VudHVyeSAqIDEwMCxcbiAgICByZXN0RGF0ZVN0cmluZzogZGF0ZVN0cmluZy5zbGljZSgoY2FwdHVyZXNbMV0gfHwgY2FwdHVyZXNbMl0pLmxlbmd0aClcbiAgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nLCB5ZWFyKSB7XG4gIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG4gIGlmICh5ZWFyID09PSBudWxsKSByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChkYXRlUmVnZXgpO1xuICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgc3RyaW5nXG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB2YXIgaXNXZWVrRGF0ZSA9ICEhY2FwdHVyZXNbNF07XG4gIHZhciBkYXlPZlllYXIgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1vbnRoID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1syXSkgLSAxO1xuICB2YXIgZGF5ID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1szXSk7XG4gIHZhciB3ZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s0XSk7XG4gIHZhciBkYXlPZldlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzVdKSAtIDE7XG4gIGlmIChpc1dlZWtEYXRlKSB7XG4gICAgaWYgKCF2YWxpZGF0ZVdlZWtEYXRlKHllYXIsIHdlZWssIGRheU9mV2VlaykpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgICByZXR1cm4gZGF5T2ZJU09XZWVrWWVhcih5ZWFyLCB3ZWVrLCBkYXlPZldlZWspO1xuICB9IGVsc2Uge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG4gICAgaWYgKCF2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRheSkgfHwgIXZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgTWF0aC5tYXgoZGF5T2ZZZWFyLCBkYXkpKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VEYXRlVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyBwYXJzZUludCh2YWx1ZSkgOiAxO1xufVxuZnVuY3Rpb24gcGFyc2VUaW1lKHRpbWVTdHJpbmcpIHtcbiAgdmFyIGNhcHR1cmVzID0gdGltZVN0cmluZy5tYXRjaCh0aW1lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gTmFOOyAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgdGltZVxuXG4gIHZhciBob3VycyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbMV0pO1xuICB2YXIgbWludXRlcyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbMl0pO1xuICB2YXIgc2Vjb25kcyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbM10pO1xuICBpZiAoIXZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIHJldHVybiBob3VycyAqIG1pbGxpc2Vjb25kc0luSG91ciArIG1pbnV0ZXMgKiBtaWxsaXNlY29uZHNJbk1pbnV0ZSArIHNlY29uZHMgKiAxMDAwO1xufVxuZnVuY3Rpb24gcGFyc2VUaW1lVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgJiYgcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKSkgfHwgMDtcbn1cbmZ1bmN0aW9uIHBhcnNlVGltZXpvbmUodGltZXpvbmVTdHJpbmcpIHtcbiAgaWYgKHRpbWV6b25lU3RyaW5nID09PSAnWicpIHJldHVybiAwO1xuICB2YXIgY2FwdHVyZXMgPSB0aW1lem9uZVN0cmluZy5tYXRjaCh0aW1lem9uZVJlZ2V4KTtcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIDA7XG4gIHZhciBzaWduID0gY2FwdHVyZXNbMV0gPT09ICcrJyA/IC0xIDogMTtcbiAgdmFyIGhvdXJzID0gcGFyc2VJbnQoY2FwdHVyZXNbMl0pO1xuICB2YXIgbWludXRlcyA9IGNhcHR1cmVzWzNdICYmIHBhcnNlSW50KGNhcHR1cmVzWzNdKSB8fCAwO1xuICBpZiAoIXZhbGlkYXRlVGltZXpvbmUoaG91cnMsIG1pbnV0ZXMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICByZXR1cm4gc2lnbiAqIChob3VycyAqIG1pbGxpc2Vjb25kc0luSG91ciArIG1pbnV0ZXMgKiBtaWxsaXNlY29uZHNJbk1pbnV0ZSk7XG59XG5mdW5jdGlvbiBkYXlPZklTT1dlZWtZZWFyKGlzb1dlZWtZZWFyLCB3ZWVrLCBkYXkpIHtcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcbiAgZGF0ZS5zZXRVVENGdWxsWWVhcihpc29XZWVrWWVhciwgMCwgNCk7XG4gIHZhciBmb3VydGhPZkphbnVhcnlEYXkgPSBkYXRlLmdldFVUQ0RheSgpIHx8IDc7XG4gIHZhciBkaWZmID0gKHdlZWsgLSAxKSAqIDcgKyBkYXkgKyAxIC0gZm91cnRoT2ZKYW51YXJ5RGF5O1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBkaWZmKTtcbiAgcmV0dXJuIGRhdGU7XG59XG5cbi8vIFZhbGlkYXRpb24gZnVuY3Rpb25zXG5cbi8vIEZlYnJ1YXJ5IGlzIG51bGwgdG8gaGFuZGxlIHRoZSBsZWFwIHllYXIgKHVzaW5nIHx8KVxudmFyIGRheXNJbk1vbnRocyA9IFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuZnVuY3Rpb24gaXNMZWFwWWVhckluZGV4KHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0MDAgPT09IDAgfHwgeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSkge1xuICByZXR1cm4gbW9udGggPj0gMCAmJiBtb250aCA8PSAxMSAmJiBkYXRlID49IDEgJiYgZGF0ZSA8PSAoZGF5c0luTW9udGhzW21vbnRoXSB8fCAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMjkgOiAyOCkpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikge1xuICByZXR1cm4gZGF5T2ZZZWFyID49IDEgJiYgZGF5T2ZZZWFyIDw9IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAzNjYgOiAzNjUpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVXZWVrRGF0ZShfeWVhciwgd2VlaywgZGF5KSB7XG4gIHJldHVybiB3ZWVrID49IDEgJiYgd2VlayA8PSA1MyAmJiBkYXkgPj0gMCAmJiBkYXkgPD0gNjtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICBpZiAoaG91cnMgPT09IDI0KSB7XG4gICAgcmV0dXJuIG1pbnV0ZXMgPT09IDAgJiYgc2Vjb25kcyA9PT0gMDtcbiAgfVxuICByZXR1cm4gc2Vjb25kcyA+PSAwICYmIHNlY29uZHMgPCA2MCAmJiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8IDYwICYmIGhvdXJzID49IDAgJiYgaG91cnMgPCAyNTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZXpvbmUoX2hvdXJzLCBtaW51dGVzKSB7XG4gIHJldHVybiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8PSA1OTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsImltcG9ydCBjcmVhdGVUb2RvRGl2IGZyb20gXCIuL2NyZWF0ZVRvZG9EaXZcIjtcbmltcG9ydCB7IHVwZGF0ZUN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi5cIjtcbmltcG9ydCBzb3J0VG9kb3MgZnJvbSBcIi4vc29ydFRvZG9zXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNlbGVjdFByb2plY3QoaWQsIHByb2plY3RzKSB7XG4gIGxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gIGRpdi5jbGFzc0xpc3QgPSBcInByb2plY3RGb2N1c2VkXCI7XG4gIGxldCBuZXdDdXJyZW50UHJvamVjdCA9IHByb2plY3RzW2lkXTtcbiAgbGV0IGRpc3BsYXlEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbFRvZG9zXCIpO1xuICBkaXNwbGF5RGl2LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgbmV3Q3VycmVudFByb2plY3QgPSBzb3J0VG9kb3MobmV3Q3VycmVudFByb2plY3QpO1xuXG4gIG5ld0N1cnJlbnRQcm9qZWN0LnRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcbiAgICBjcmVhdGVUb2RvRGl2KHRvZG8pO1xuICB9KTtcblxuICB1cGRhdGVDdXJyZW50UHJvamVjdChuZXdDdXJyZW50UHJvamVjdCk7XG4gIHJldHVybiBuZXdDdXJyZW50UHJvamVjdDtcbn1cbiIsImltcG9ydCB7IGNvbXBhcmVBc2MsIGZvcm1hdCwgcGFyc2VJU08gfSBmcm9tICdkYXRlLWZucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNvcnRUb2RvcyhjdXJyZW50UHJvamVjdCkge1xuXG4gICAgY3VycmVudFByb2plY3QudG9kb3Muc29ydCgoYSwgYikgPT4gY29tcGFyZUFzYyhwYXJzZUlTTyhhLmRhdGUpLCBwYXJzZUlTTyhiLmRhdGUpKSk7XG4gICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgY29tcGFyZUFzY1xuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb21wYXJlIHRoZSB0d28gZGF0ZXMgYW5kIHJldHVybiAtMSwgMCBvciAxLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBhZnRlciB0aGUgc2Vjb25kLFxuICogLTEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYmVmb3JlIHRoZSBzZWNvbmQgb3IgMCBpZiBkYXRlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY29tcGFyZVxuICogQHJldHVybnMge051bWJlcn0gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFyaXNvblxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb21wYXJlIDExIEZlYnJ1YXJ5IDE5ODcgYW5kIDEwIEp1bHkgMTk4OTpcbiAqIGNvbnN0IHJlc3VsdCA9IGNvbXBhcmVBc2MobmV3IERhdGUoMTk4NywgMSwgMTEpLCBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkpXG4gKiAvLz0+IC0xXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFNvcnQgdGhlIGFycmF5IG9mIGRhdGVzOlxuICogY29uc3QgcmVzdWx0ID0gW1xuICogICBuZXcgRGF0ZSgxOTk1LCA2LCAyKSxcbiAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLFxuICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMClcbiAqIF0uc29ydChjb21wYXJlQXNjKVxuICogLy89PiBbXG4gKiAvLyAgIFdlZCBGZWIgMTEgMTk4NyAwMDowMDowMCxcbiAqIC8vICAgTW9uIEp1bCAxMCAxOTg5IDAwOjAwOjAwLFxuICogLy8gICBTdW4gSnVsIDAyIDE5OTUgMDA6MDA6MDBcbiAqIC8vIF1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcGFyZUFzYyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0ID0gdG9EYXRlKGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0ID0gdG9EYXRlKGRpcnR5RGF0ZVJpZ2h0KTtcbiAgdmFyIGRpZmYgPSBkYXRlTGVmdC5nZXRUaW1lKCkgLSBkYXRlUmlnaHQuZ2V0VGltZSgpO1xuICBpZiAoZGlmZiA8IDApIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSBpZiAoZGlmZiA+IDApIHtcbiAgICByZXR1cm4gMTtcbiAgICAvLyBSZXR1cm4gMCBpZiBkaWZmIGlzIDA7IHJldHVybiBOYU4gaWYgZGlmZiBpcyBOYU5cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZGlmZjtcbiAgfVxufSIsImV4cG9ydCBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKG5hbWUsIGlkKSA9PiB7XG4gICAgcmV0dXJuIHtuYW1lLCB0b2RvczogW10sIGlkfVxufSIsImltcG9ydCBzZWxlY3RQcm9qZWN0IGZyb20gXCIuL3NlbGVjdFByb2plY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVByb2plY3QgfSBmcm9tIFwiLi9jcmVhdGVQcm9qZWN0XCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50UHJvamVjdCB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyBnZXRQcm9qZWN0cyB9IGZyb20gXCIuXCI7XG5pbXBvcnQgZGVsZXRlUHJvamVjdCBmcm9tIFwiLi9kZWxldGVQcm9qZWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0RGl2KHByb2plY3ROYW1lLCBpKSB7XG4gIGxldCBuZXdQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbmV3UHJvamVjdC5jbGFzc0xpc3QuYWRkKFwiYWRkZWRQcm9qZWN0XCIpO1xuICBuZXdQcm9qZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIGkpO1xuXG4gIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIHNwYW4udGV4dENvbnRlbnQgPSBwcm9qZWN0TmFtZTtcbiAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgc2VsZWN0UHJvamVjdChldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5pZCwgZ2V0UHJvamVjdHMoKSk7XG4gIH0pO1xuXG4gIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBpbWcuc3JjID0gXCJyZW1vdmUucG5nXCI7XG4gIGltZy5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInJlbW92ZUljb25cIik7XG4gIGltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGkpO1xuICAgIGRlbGV0ZVByb2plY3QoaSk7XG4gIH0pO1xuXG4gIG5ld1Byb2plY3QuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gIG5ld1Byb2plY3QuYXBwZW5kQ2hpbGQoaW1nKTtcblxuICBsZXQgYWxsUHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbFByb2plY3RzXCIpO1xuICBhbGxQcm9qZWN0cy5hcHBlbmRDaGlsZChuZXdQcm9qZWN0KTtcblxuICBjb25zdCBwcm9qZWN0ID0gY3JlYXRlUHJvamVjdChwcm9qZWN0TmFtZSwgaSk7XG5cbiAgcmV0dXJuIHByb2plY3Q7XG59XG4iLCJpbXBvcnQgeyBnZXRDdXJyZW50UHJvamVjdCwgZ2V0UHJvamVjdHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHNlbGVjdFByb2plY3QgZnJvbSBcIi4vc2VsZWN0UHJvamVjdFwiO1xuaW1wb3J0IHsgdXBkYXRlUHJvamVjdHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgY3JlYXRlUHJvamVjdERpdiB9IGZyb20gXCIuL2NyZWF0ZVByb2plY3REaXZcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChpZCkge1xuXG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG5cbiAgbGV0IHByb2plY3RJbmRleCA9IGFsbFByb2plY3RzLmZpbmRJbmRleCgocHJvamVjdCkgPT4gcHJvamVjdC5pZCA9PSBpZCk7XG4gIGFsbFByb2plY3RzLnNwbGljZShwcm9qZWN0SW5kZXgsIDEpO1xuXG4gIHVwZGF0ZVByb2plY3RzKGFsbFByb2plY3RzKTtcblxuICBsZXQgcHJvamVjdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWxsUHJvamVjdHNcIik7XG4gIHByb2plY3REaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgXG4gIGxldCBpID0gMDtcbiAgYWxsUHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgIGNyZWF0ZVByb2plY3REaXYocHJvamVjdC5uYW1lLCBpKTtcbiAgICBpKys7XG4gIH0pO1xuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcbn1cbiIsImltcG9ydCB7IGNyZWF0ZVByb2plY3REaXYgfSBmcm9tIFwiLi9jcmVhdGVQcm9qZWN0RGl2XCI7XG5pbXBvcnQgc2VsZWN0UHJvamVjdCBmcm9tIFwiLi9zZWxlY3RQcm9qZWN0XCI7XG5pbXBvcnQgY3JlYXRlVG9kb0RpdiBmcm9tIFwiLi9jcmVhdGVUb2RvRGl2XCI7XG5pbXBvcnQgeyBjcmVhdGVQcm9qZWN0IH0gZnJvbSBcIi4vY3JlYXRlUHJvamVjdFwiO1xuaW1wb3J0IHsgY3JlYXRlVG9kbyB9IGZyb20gXCIuL2NyZWF0ZVRvZG9cIjtcbmltcG9ydCBkZWxldGVQcm9qZWN0IGZyb20gXCIuL2RlbGV0ZVByb2plY3RcIjtcblxubGV0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzXCIpKSB8fCBbXTtcbmxldCBjdXJyZW50UHJvamVjdCA9XG4gIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiKSkgfHxcbiAgY3JlYXRlUHJvamVjdChcImN1cnJlbnRQcm9qZWN0XCIsIDApO1xuY29uc29sZS5sb2cocHJvamVjdHMpO1xuXG5sZXQgaSA9IDA7XG5cbnByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHtcbiAgcHJvamVjdC5pZCA9IGk7XG4gIGNyZWF0ZVByb2plY3REaXYocHJvamVjdC5uYW1lLCBpKTtcbiAgc2VsZWN0UHJvamVjdChjdXJyZW50UHJvamVjdC5pZCwgcHJvamVjdHMpO1xuICBpKys7XG59KTtcblxubGV0IHByb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RCdXR0b25cIik7XG5wcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld1Byb2plY3RcIikudmFsdWUgIT0gXCJcIikge1xuICAgIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3UHJvamVjdFwiKTtcbiAgICBjb25zb2xlLmxvZyhpKTtcbiAgICBsZXQgcHJvamVjdCA9IGNyZWF0ZVByb2plY3REaXYocHJvamVjdE5hbWUudmFsdWUsIGkpO1xuICAgIHByb2plY3RzLnB1c2gocHJvamVjdCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgIHByb2plY3ROYW1lLnZhbHVlID0gXCJcIjtcbiAgICBpKys7XG4gIH1cbn0pO1xuXG5sZXQgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kb0J1dHRvblwiKTtcbnRvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdUYXNrXCIpLnZhbHVlICE9IFwiXCIpIHtcblxuICAgIGxldCBuZXdUb2RvID0gY3JlYXRlVG9kbygpO1xuICAgIGN1cnJlbnRQcm9qZWN0LnRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgY3JlYXRlVG9kb0RpdihuZXdUb2RvKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gICAgc2VsZWN0UHJvamVjdChjdXJyZW50UHJvamVjdC5pZCwgcHJvamVjdHMsIGV2ZW50KTtcblxuICB9IGVsc2Uge1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdUYXNrXCIpLnZhbHVlID0gXCJFbnRlciB0YXNrIG5hbWVcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld1Rhc2tcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld1Rhc2tcIikudmFsdWUgPSBcIlwiO1xuXG4gICAgfSksXG4gICAgICB7IG9uY2U6IHRydWUgfTtcbiAgfVxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XG5sZXQgc2VsZWN0ZWREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RGb2N1c2VkXCIpO1xuXG5pZiAoXG4gIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50ICYmXG4gIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFkZGVkUHJvamVjdFwiKSAmJlxuICBzZWxlY3RlZERpdlxuKSB7XG4gIGxldCBkaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0Rm9jdXNlZFwiKTtcbiAgZGl2cy5mb3JFYWNoKChkaXYpID0+IHtcbiAgICBkaXYuY2xhc3NMaXN0ID0gXCJhZGRlZFByb2plY3RcIjtcbiAgfSk7XG59XG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRQcm9qZWN0KCkge1xuICByZXR1cm4gY3VycmVudFByb2plY3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9qZWN0cygpIHtcbiAgcmV0dXJuIHByb2plY3RzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvamVjdHModXBkYXRlZFByb2plY3RzKSB7XG4gIHByb2plY3RzID0gdXBkYXRlZFByb2plY3RzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ3VycmVudFByb2plY3QodXBkYXRlZFByb2plY3QpIHtcbiAgY3VycmVudFByb2plY3QgPSB1cGRhdGVkUHJvamVjdDtcbn1cbiIsImltcG9ydCB7IGdldEN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuXG5leHBvcnQgY29uc3QgY3JlYXRlVG9kbyA9ICgpID0+IHtcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJykudmFsdWU7XG4gICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlO1xuICAgIGxldCB1cmdlbmN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VyZ2VuY3knKS52YWx1ZTtcbiAgICBsZXQgaW5kZXggPSBnZXRDdXJyZW50UHJvamVjdCgpLnRvZG9zLmxlbmd0aDtcblxuICAgIHJldHVybiB7bmFtZSwgZGF0ZSwgdXJnZW5jeSwgaW5kZXh9XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY3JlYXRlVG9kb0RpdiIsInRvZG8iLCJuYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0ZSIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsInRleHRDb250ZW50IiwiaWQiLCJ0YXNrRGF0ZSIsInRhc2tVcmdlbmN5IiwidXJnZW5jeSIsImVkaXRJbWciLCJzcmMiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZWRpdEZvcm0iLCJuYW1lSW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJyZXF1aXJlZCIsImRhdGVJbnB1dCIsInVyZ2VuY3lEcm9wZG93biIsIm9wdGlvbjEiLCJ2YWx1ZSIsIm9wdGlvbjIiLCJhcHBlbmRDaGlsZCIsImVkaXRCdXR0b24iLCJuZXdOYW1lIiwibmV3RGF0ZSIsIm5ld1VyZ2VuY3kiLCJ1cGRhdGVUb2RvSW5mbyIsImJvZHkiLCJyZW1vdmVDaGlsZCIsIm92ZXJsYXkiLCJjdXJyZW50UHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsImNvbnNvbGUiLCJsb2ciLCJzZWxlY3RQcm9qZWN0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImVkaXRUb2RvIiwicmVtb3ZlSW1nIiwiaW5kZXgiLCJ0b2RvSW5kZXgiLCJ0b2RvcyIsImZpbmQiLCJzcGxpY2UiLCJpIiwiZm9yRWFjaCIsImFsbFByb2plY3RzIiwiZGVsZXRlVG9kbyIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicmVxdWlyZWRBcmdzIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwidG9TdHJpbmciLCJEYXRlIiwiZ2V0VGltZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwiTWF0aCIsInBvdyIsIm1pbGxpc2Vjb25kc0luTWludXRlIiwibWlsbGlzZWNvbmRzSW5Ib3VyIiwicGFyc2VJU08iLCJvcHRpb25zIiwiX29wdGlvbnMkYWRkaXRpb25hbERpIiwiYWRkaXRpb25hbERpZ2l0cyIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJjZWlsIiwiZmxvb3IiLCJ0b0ludGVnZXIiLCJSYW5nZUVycm9yIiwiZGF0ZVN0cmluZ3MiLCJkYXRlU3RyaW5nIiwidGltZVN0cmluZyIsImFycmF5Iiwic3BsaXQiLCJwYXR0ZXJucyIsImRhdGVUaW1lRGVsaW1pdGVyIiwidGVzdCIsInRpbWVab25lRGVsaW1pdGVyIiwic3Vic3RyIiwidG9rZW4iLCJ0aW1lem9uZSIsImV4ZWMiLCJ0aW1lIiwicmVwbGFjZSIsInNwbGl0RGF0ZVN0cmluZyIsInBhcnNlWWVhclJlc3VsdCIsInJlZ2V4IiwiUmVnRXhwIiwiY2FwdHVyZXMiLCJtYXRjaCIsInllYXIiLCJyZXN0RGF0ZVN0cmluZyIsInBhcnNlSW50IiwiY2VudHVyeSIsInNsaWNlIiwicGFyc2VZZWFyIiwiZGF0ZVJlZ2V4IiwiaXNXZWVrRGF0ZSIsImRheU9mWWVhciIsInBhcnNlRGF0ZVVuaXQiLCJtb250aCIsImRheSIsIndlZWsiLCJkYXlPZldlZWsiLCJfeWVhciIsInZhbGlkYXRlV2Vla0RhdGUiLCJpc29XZWVrWWVhciIsInNldFVUQ0Z1bGxZZWFyIiwiZGlmZiIsImdldFVUQ0RheSIsInNldFVUQ0RhdGUiLCJnZXRVVENEYXRlIiwiZGF5T2ZJU09XZWVrWWVhciIsImRheXNJbk1vbnRocyIsImlzTGVhcFllYXJJbmRleCIsInZhbGlkYXRlRGF0ZSIsInZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSIsIm1heCIsInBhcnNlRGF0ZSIsIm9mZnNldCIsInRpbWVzdGFtcCIsInRpbWVSZWdleCIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VUaW1lIiwiZGlydHlEYXRlIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwic2V0SG91cnMiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwidGltZXpvbmVTdHJpbmciLCJ0aW1lem9uZVJlZ2V4Iiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJwYXJzZVRpbWV6b25lIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRCeUlkIiwibmV3Q3VycmVudFByb2plY3QiLCJpbm5lckhUTUwiLCJzb3J0IiwiYSIsImIiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdCIsImRhdGVSaWdodCIsImNvbXBhcmVBc2MiLCJzb3J0VG9kb3MiLCJ1cGRhdGVDdXJyZW50UHJvamVjdCIsImNyZWF0ZVByb2plY3QiLCJjcmVhdGVQcm9qZWN0RGl2IiwicHJvamVjdE5hbWUiLCJuZXdQcm9qZWN0Iiwic3BhbiIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImltZyIsInByb2plY3RJbmRleCIsImZpbmRJbmRleCIsInByb2plY3QiLCJ1cGRhdGVQcm9qZWN0cyIsImRlbGV0ZVByb2plY3QiLCJwYXJzZSIsImdldEl0ZW0iLCJ1cGRhdGVkUHJvamVjdHMiLCJ1cGRhdGVkUHJvamVjdCIsInB1c2giLCJuZXdUb2RvIiwic2VsZWN0ZWREaXYiLCJjb250YWlucyIsInF1ZXJ5U2VsZWN0b3JBbGwiXSwic291cmNlUm9vdCI6IiJ9