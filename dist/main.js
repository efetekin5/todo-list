(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){let t=document.querySelector("#newTask"),n=document.querySelector("#date"),r=document.createElement("div");r.classList.add("task");let o=document.createElement("span");o.textContent=e.name,o.id="taskName";let a=document.createElement("span");a.textContent=e.date,a.id="taskDate";let i=document.createElement("div");i.textContent=e.urgency,i.id="taskUrgency";let d=document.createElement("img");d.src="../dist/edit.png",d.setAttribute("id","taskIcon"),d.addEventListener("click",(()=>{!function(e){let t=document.createElement("div");t.classList.add("editTodo");let n=document.createElement("input");n.id="editTodoName",n.type="text",n.placeholder="New name",n.required=!0;let r=document.createElement("input");r.id="editTodoDate",r.type="date",r.required=!0;let o=document.createElement("select");o.id="editTodoUrgency";let a=document.createElement("option");a.value="urgent",a.textContent="Urgent";let i=document.createElement("option");i.value="nonurgent",i.textContent="Nonurgent",o.appendChild(a),o.appendChild(i);let d=document.createElement("button");d.id="editButton",d.type="button",d.textContent="Update",d.addEventListener("click",(()=>{e=function(e){let t=document.querySelector("#editTodoName"),n=document.querySelector("#editTodoDate"),r=document.querySelector("#editTodoUrgency");return e.name=t.value,e.date=n.value,e.urgency=r.value,e}(e),c.removeChild(l),c.removeChild(t);let n=T(),r=w();console.log(n.id),y(n.id,r),localStorage.setItem("projects",JSON.stringify(r))})),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(d);let l=document.createElement("div");l.classList.add("overlay");let c=document.getElementsByTagName("body")[0];c.appendChild(l),c.appendChild(t)}(e)}));let l=document.createElement("img");l.src="../dist/remove.png",l.setAttribute("id","taskIcon"),l.addEventListener("click",(()=>{!function(e){let t=T(),n=t.todos.find((t=>t.index==e)).index;t.todos.splice(n,1);let r=w(),o=0;t.todos.forEach((e=>{e.index=o,o++})),y(t.id,r),localStorage.setItem("projects",JSON.stringify(r))}(e.index)})),r.appendChild(o),r.appendChild(a),r.appendChild(i),r.appendChild(d),r.appendChild(l),document.querySelector(".allTodos").appendChild(r),t.value="",n.value=""}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){r(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===n(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}e.d({},{vo:()=>T,mW:()=>w,$w:()=>D,id:()=>C}),Math.pow(10,8);var a=6e4,i=36e5;function d(e,t){var n;r(1,arguments);var o=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var d,y=function(e){var t,n={},r=e.split(l.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],l.timeZoneDelimiter.test(n.date)&&(n.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=l.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(y.date){var v=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(y.date,o);d=function(e,t){if(null===t)return new Date(NaN);var n=e.match(c);if(!n)return new Date(NaN);var r=!!n[4],o=m(n[1]),a=m(n[2])-1,i=m(n[3]),d=m(n[4]),l=m(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,d,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,d,l):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(g[t]||(f(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,o)?(u.setUTCFullYear(t,a,Math.max(o,i)),u):new Date(NaN)}(v.restDateString,v.year)}if(!d||isNaN(d.getTime()))return new Date(NaN);var S,N=d.getTime(),h=0;if(y.time&&(h=function(e){var t=e.match(u);if(!t)return NaN;var n=p(t[1]),r=p(t[2]),o=p(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*i+r*a+1e3*o:NaN}(y.time),isNaN(h)))return new Date(NaN);if(!y.timezone){var E=new Date(N+h),T=new Date(0);return T.setFullYear(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate()),T.setHours(E.getUTCHours(),E.getUTCMinutes(),E.getUTCSeconds(),E.getUTCMilliseconds()),T}return S=function(e){if("Z"===e)return 0;var t=e.match(s);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*i+o*a):NaN}(y.timezone),isNaN(S)?new Date(NaN):new Date(N+h+S)}var l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var g=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400==0||e%4==0&&e%100!=0}function y(e,n){document.getElementById(e).classList="projectFocused";let a=n[e];return document.querySelector(".allTodos").innerHTML="",a=function(e){return e.todos.sort(((e,t)=>function(e,t){r(2,arguments);var n=o(e),a=o(t),i=n.getTime()-a.getTime();return i<0?-1:i>0?1:i}(d(e.date),d(t.date)))),e}(a),a.todos.forEach((e=>{t(e)})),D(a),a}const v=(e,t)=>({name:e,todos:[],id:t});function S(e,t){let n=document.createElement("div");n.classList.add("addedProject"),n.setAttribute("id",t);let r=document.createElement("span");r.textContent=e,r.addEventListener("click",(e=>{y(e.target.parentElement.id,w())}));let o=document.createElement("img");return o.src="remove.png",o.setAttribute("id","removeIcon"),o.addEventListener("click",(()=>{console.log(t),function(e){console.log(e);let t=w();console.log(t);let n=t.findIndex((t=>t.id==e));t.splice(n,1),C(t),T(),document.querySelector(".allProjects").innerHTML="";let r=0;t.forEach((e=>{S(e.name,r),r++})),localStorage.setItem("projects",JSON.stringify(t))}(t)})),n.appendChild(r),n.appendChild(o),document.querySelector(".allProjects").appendChild(n),v(e,t)}let N=JSON.parse(localStorage.getItem("projects"))||[],h=JSON.parse(localStorage.getItem("currentProject"))||v("currentProject",0);console.log(N);let E=0;function T(){return h}function w(){return N}function C(e){N=e}function D(e){h=e}N.forEach((e=>{e.id=E,S(e.name,E),y(h.id,N),E++})),document.querySelector("#projectButton").addEventListener("click",(()=>{if(""!=document.querySelector("#newProject").value){let e=document.querySelector("#newProject");console.log(E);let t=S(e.value,E);N.push(t),localStorage.setItem("projects",JSON.stringify(N)),e.value="",E++}})),document.querySelector("#todoButton").addEventListener("click",(e=>{if(""!=document.querySelector("#newTask").value){let e={name:document.querySelector("#newTask").value,date:document.querySelector("#date").value,urgency:document.querySelector("#urgency").value,index:T().todos.length};h.todos.push(e),t(e),localStorage.setItem("projects",JSON.stringify(N)),y(h.id,N)}else document.querySelector("#newTask").value="Enter task name",document.querySelector("#newTask").addEventListener("click",(()=>{document.querySelector("#newTask").value=""}))})),document.addEventListener("mousedown",(e=>{let t=document.querySelector(".projectFocused");e.target.parentElement&&e.target.parentElement.classList.contains("addedProject")&&t&&document.querySelectorAll(".projectFocused").forEach((e=>{e.classList="addedProject"}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTUMsT0FBT0MsZUFBaUJGLEVBQU1DLE9BQU9DLGNBQWN6TCxVQUFVdU0sU0FBUyxpQkFBbUJELEdBQ25GM00sU0FBUzZNLGlCQUFpQixtQkFDaENwSixTQUFTdEQsSUFDVkEsRUFBSUUsVUFBWSxjQUFjLEdBRXRDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY3JlYXRlVG9kb0Rpdi5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZWRpdFRvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3VwZGF0ZVRvZG9JbmZvLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kZWxldGVUb2RvLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2NvbnN0YW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3BhcnNlSVNPL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RTZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3NvcnRUb2Rvcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2NvbXBhcmVBc2MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NyZWF0ZVByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NyZWF0ZVByb2plY3REaXYuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2RlbGV0ZVByb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVUb2RvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IGRlbGV0ZVRvZG8gZnJvbSBcIi4vZGVsZXRlVG9kb1wiO1xuaW1wb3J0IGVkaXRUb2RvIGZyb20gXCIuL2VkaXRUb2RvXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVRvZG9EaXYodG9kbykge1xuICAgIFxuICAgIGxldCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKTtcbiAgICBsZXQgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJyk7XG5cbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcblxuICAgIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB0YXNrTmFtZS50ZXh0Q29udGVudCA9IHRvZG8ubmFtZTtcbiAgICB0YXNrTmFtZS5pZCA9ICd0YXNrTmFtZSc7XG5cbiAgICBsZXQgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGFza0RhdGUudGV4dENvbnRlbnQgPSB0b2RvLmRhdGU7XG4gICAgdGFza0RhdGUuaWQgPSAndGFza0RhdGUnO1xuXG4gICAgbGV0IHRhc2tVcmdlbmN5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza1VyZ2VuY3kudGV4dENvbnRlbnQgPSB0b2RvLnVyZ2VuY3k7XG4gICAgdGFza1VyZ2VuY3kuaWQgPSAndGFza1VyZ2VuY3knO1xuXG4gICAgbGV0IGVkaXRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBlZGl0SW1nLnNyYyA9ICcuLi9kaXN0L2VkaXQucG5nJztcbiAgICBlZGl0SW1nLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFza0ljb24nKTtcbiAgICBlZGl0SW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBlZGl0VG9kbyh0b2RvKTtcbiAgICB9KVxuXG4gICAgbGV0IHJlbW92ZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIHJlbW92ZUltZy5zcmMgPSAnLi4vZGlzdC9yZW1vdmUucG5nJztcbiAgICByZW1vdmVJbWcuc2V0QXR0cmlidXRlKCdpZCcsICd0YXNrSWNvbicpO1xuICAgIHJlbW92ZUltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZGVsZXRlVG9kbyh0b2RvLmluZGV4KTtcbiAgICB9KVxuXG4gICAgXG4gICAgZGl2LmFwcGVuZENoaWxkKHRhc2tOYW1lKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQodGFza0RhdGUpO1xuICAgIGRpdi5hcHBlbmRDaGlsZCh0YXNrVXJnZW5jeSk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGVkaXRJbWcpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChyZW1vdmVJbWcpO1xuXG4gICAgbGV0IGRpc3BsYXlEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsVG9kb3MnKTtcbiAgICBkaXNwbGF5RGl2LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICBuYW1lLnZhbHVlID0gJyc7XG4gICAgZGF0ZS52YWx1ZSA9ICcnO1xufSIsImltcG9ydCB1cGRhdGVUb2RvSW5mbyBmcm9tIFwiLi91cGRhdGVUb2RvSW5mb1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFByb2plY3QgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgZ2V0UHJvamVjdHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHByb2plY3RTZWxlY3Rpb24gZnJvbSBcIi4vcHJvamVjdFNlbGVjdGlvblwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlZGl0VG9kbyh0b2RvKSB7XG5cbiAgICBsZXQgZWRpdEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlZGl0Rm9ybS5jbGFzc0xpc3QuYWRkKCdlZGl0VG9kbycpO1xuXG4gICAgbGV0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgbmFtZUlucHV0LmlkID0gJ2VkaXRUb2RvTmFtZSc7XG4gICAgbmFtZUlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgbmFtZUlucHV0LnBsYWNlaG9sZGVyID0gJ05ldyBuYW1lJztcbiAgICBuYW1lSW5wdXQucmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgbGV0IGRhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZGF0ZUlucHV0LmlkID0gJ2VkaXRUb2RvRGF0ZSc7XG4gICAgZGF0ZUlucHV0LnR5cGUgPSAnZGF0ZSc7XG4gICAgZGF0ZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGxldCB1cmdlbmN5SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICB1cmdlbmN5SW5wdXQuaWQgPSAnZWRpdFRvZG9VcmdlbmN5JztcblxuICAgIGxldCBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgb3B0aW9uMS52YWx1ZSA9ICd1cmdlbnQnO1xuICAgIG9wdGlvbjEudGV4dENvbnRlbnQgPSAnVXJnZW50JztcbiAgICBsZXQgb3B0aW9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbjIudmFsdWUgPSAnbm9udXJnZW50JztcbiAgICBvcHRpb24yLnRleHRDb250ZW50ID0gJ05vbnVyZ2VudCc7XG4gICAgdXJnZW5jeUlucHV0LmFwcGVuZENoaWxkKG9wdGlvbjEpO1xuICAgIHVyZ2VuY3lJbnB1dC5hcHBlbmRDaGlsZChvcHRpb24yKTtcblxuICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZWRpdEJ1dHRvbi5pZCA9ICdlZGl0QnV0dG9uJztcbiAgICBlZGl0QnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBlZGl0QnV0dG9uLnRleHRDb250ZW50ID0gJ1VwZGF0ZSc7XG5cbiAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0b2RvID0gdXBkYXRlVG9kb0luZm8odG9kbyk7XG4gICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQoZWRpdEZvcm0pO1xuICAgICAgICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICAgICAgICBsZXQgcHJvamVjdHMgPSBnZXRQcm9qZWN0cygpO1xuICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50UHJvamVjdC5pZCk7XG4gICAgICAgIHByb2plY3RTZWxlY3Rpb24oY3VycmVudFByb2plY3QuaWQsIHByb2plY3RzKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcbiAgICB9KTtcblxuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gICAgZWRpdEZvcm0uYXBwZW5kQ2hpbGQoZGF0ZUlucHV0KTtcbiAgICBlZGl0Rm9ybS5hcHBlbmRDaGlsZCh1cmdlbmN5SW5wdXQpO1xuICAgIGVkaXRGb3JtLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuXG4gICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcblxuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgICBib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoZWRpdEZvcm0pO1xuXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlVG9kb0luZm8odG9kbykge1xuICAgIGxldCBuZXdOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXRUb2RvTmFtZScpO1xuICAgIGxldCBuZXdEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXRUb2RvRGF0ZScpO1xuICAgIGxldCBuZXdVcmdlbmN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXRUb2RvVXJnZW5jeScpO1xuXG4gICAgdG9kby5uYW1lID0gbmV3TmFtZS52YWx1ZTtcbiAgICB0b2RvLmRhdGUgPSBuZXdEYXRlLnZhbHVlO1xuICAgIHRvZG8udXJnZW5jeSA9IG5ld1VyZ2VuY3kudmFsdWU7XG4gICAgcmV0dXJuIHRvZG87XG59IiwiaW1wb3J0IHsgZ2V0Q3VycmVudFByb2plY3QsIGdldFByb2plY3RzIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBwcm9qZWN0U2VsZWN0aW9uIGZyb20gXCIuL3Byb2plY3RTZWxlY3Rpb25cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVsZXRlVG9kbyhpbmRleCkge1xuICAgIFxuICAgIGxldCBjdXJyZW50UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgbGV0IHRvZG9Ub0RlbGV0ZSA9IGN1cnJlbnRQcm9qZWN0LnRvZG9zLmZpbmQoKHRvZG8pID0+IHRvZG8uaW5kZXggPT0gaW5kZXgpO1xuXG4gICAgbGV0IHRvZG9JbmRleCA9IHRvZG9Ub0RlbGV0ZS5pbmRleDtcbiAgICBjdXJyZW50UHJvamVjdC50b2Rvcy5zcGxpY2UodG9kb0luZGV4LCAxKTtcblxuICAgIGxldCBhbGxQcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgY3VycmVudFByb2plY3QudG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICB0b2RvLmluZGV4ID0gaTtcbiAgICAgICAgaSsrO1xuICAgIH0pXG4gICAgcHJvamVjdFNlbGVjdGlvbihjdXJyZW50UHJvamVjdC5pZCwgYWxsUHJvamVjdHMpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7XG5cbiAgLy8gQ2xvbmUgdGhlIGRhdGVcbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCBfdHlwZW9mKGFyZ3VtZW50KSA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI3N0cmluZy1hcmd1bWVudHNcIik7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCIvKipcbiAqIERheXMgaW4gMSB3ZWVrLlxuICpcbiAqIEBuYW1lIGRheXNJbldlZWtcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgZGF5c0luV2VlayA9IDc7XG5cbi8qKlxuICogRGF5cyBpbiAxIHllYXJcbiAqIE9uZSB5ZWFycyBlcXVhbHMgMzY1LjI0MjUgZGF5cyBhY2NvcmRpbmcgdG8gdGhlIGZvcm11bGE6XG4gKlxuICogPiBMZWFwIHllYXIgb2NjdXJlcyBldmVyeSA0IHllYXJzLCBleGNlcHQgZm9yIHllYXJzIHRoYXQgYXJlIGRpdmlzYWJsZSBieSAxMDAgYW5kIG5vdCBkaXZpc2FibGUgYnkgNDAwLlxuICogPiAxIG1lYW4geWVhciA9ICgzNjUrMS80LTEvMTAwKzEvNDAwKSBkYXlzID0gMzY1LjI0MjUgZGF5c1xuICpcbiAqIEBuYW1lIGRheXNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgZGF5c0luWWVhciA9IDM2NS4yNDI1O1xuXG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBuYW1lIG1heFRpbWVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgbWludXRlXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5NaW51dGVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcblxuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luSG91ciA9IDM2MDAwMDA7XG5cbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgc2Vjb25kXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5TZWNvbmRcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5TZWNvbmQgPSAxMDAwO1xuXG4vKipcbiAqIE1pbmltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBuYW1lIG1pblRpbWVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbWluVGltZSA9IC1tYXhUaW1lO1xuXG4vKipcbiAqIE1pbnV0ZXMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgbWludXRlc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtaW51dGVzSW5Ib3VyID0gNjA7XG5cbi8qKlxuICogTW9udGhzIGluIDEgcXVhcnRlclxuICpcbiAqIEBuYW1lIG1vbnRoc0luUXVhcnRlclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBtb250aHNJblF1YXJ0ZXIgPSAzO1xuXG4vKipcbiAqIE1vbnRocyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBtb250aHNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgbW9udGhzSW5ZZWFyID0gMTI7XG5cbi8qKlxuICogUXVhcnRlcnMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgcXVhcnRlcnNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgcXVhcnRlcnNJblllYXIgPSA0O1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgc2Vjb25kc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgbWludXRlXG4gKlxuICogQG5hbWUgc2Vjb25kc0luTWludXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJbk1pbnV0ZSA9IDYwO1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSBkYXlcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5EYXlcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luRGF5ID0gc2Vjb25kc0luSG91ciAqIDI0O1xuXG4vKipcbiAqIFNlY29uZHMgaW4gMSB3ZWVrXG4gKlxuICogQG5hbWUgc2Vjb25kc0luV2Vla1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBzZWNvbmRzSW5XZWVrID0gc2Vjb25kc0luRGF5ICogNztcblxuLyoqXG4gKiBTZWNvbmRzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIHNlY29uZHNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luWWVhciA9IHNlY29uZHNJbkRheSAqIGRheXNJblllYXI7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIG1vbnRoXG4gKlxuICogQG5hbWUgc2Vjb25kc0luTW9udGhcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgc2Vjb25kc0luTW9udGggPSBzZWNvbmRzSW5ZZWFyIC8gMTI7XG5cbi8qKlxuICogU2Vjb25kcyBpbiAxIHF1YXJ0ZXJcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5RdWFydGVyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIHNlY29uZHNJblF1YXJ0ZXIgPSBzZWNvbmRzSW5Nb250aCAqIDM7IiwiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5Ib3VyLCBtaWxsaXNlY29uZHNJbk1pbnV0ZSB9IGZyb20gXCIuLi9jb25zdGFudHMvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBwYXJzZUlTT1xuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBQYXJzZSBJU08gc3RyaW5nXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGluIElTTyA4NjAxIGZvcm1hdCBhbmQgcmV0dXJuIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogRnVuY3Rpb24gYWNjZXB0cyBjb21wbGV0ZSBJU08gODYwMSBmb3JtYXRzIGFzIHdlbGwgYXMgcGFydGlhbCBpbXBsZW1lbnRhdGlvbnMuXG4gKiBJU08gODYwMTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMVxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpc24ndCBhIHN0cmluZywgdGhlIGZ1bmN0aW9uIGNhbm5vdCBwYXJzZSB0aGUgc3RyaW5nIG9yXG4gKiB0aGUgdmFsdWVzIGFyZSBpbnZhbGlkLCBpdCByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzYCBtdXN0IGJlIDAsIDEgb3IgMlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHN0cmluZyAnMjAxNC0wMi0xMVQxMTozMDozMCcgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHBhcnNlSVNPKCcyMDE0LTAyLTExVDExOjMwOjMwJylcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcrMDIwMTQxMDEnIHRvIGRhdGUsXG4gKiAvLyBpZiB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdCBpcyAxOlxuICogY29uc3QgcmVzdWx0ID0gcGFyc2VJU08oJyswMjAxNDEwMScsIHsgYWRkaXRpb25hbERpZ2l0czogMSB9KVxuICogLy89PiBGcmkgQXByIDExIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VJU08oYXJndW1lbnQsIG9wdGlvbnMpIHtcbiAgdmFyIF9vcHRpb25zJGFkZGl0aW9uYWxEaTtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhZGRpdGlvbmFsRGlnaXRzID0gdG9JbnRlZ2VyKChfb3B0aW9ucyRhZGRpdGlvbmFsRGkgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0cykgIT09IG51bGwgJiYgX29wdGlvbnMkYWRkaXRpb25hbERpICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRhZGRpdGlvbmFsRGkgOiAyKTtcbiAgaWYgKGFkZGl0aW9uYWxEaWdpdHMgIT09IDIgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMSAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2FkZGl0aW9uYWxEaWdpdHMgbXVzdCBiZSAwLCAxIG9yIDInKTtcbiAgfVxuICBpZiAoISh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG4gIHZhciBkYXRlU3RyaW5ncyA9IHNwbGl0RGF0ZVN0cmluZyhhcmd1bWVudCk7XG4gIHZhciBkYXRlO1xuICBpZiAoZGF0ZVN0cmluZ3MuZGF0ZSkge1xuICAgIHZhciBwYXJzZVllYXJSZXN1bHQgPSBwYXJzZVllYXIoZGF0ZVN0cmluZ3MuZGF0ZSwgYWRkaXRpb25hbERpZ2l0cyk7XG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShwYXJzZVllYXJSZXN1bHQucmVzdERhdGVTdHJpbmcsIHBhcnNlWWVhclJlc3VsdC55ZWFyKTtcbiAgfVxuICBpZiAoIWRhdGUgfHwgaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICB2YXIgdGltZSA9IDA7XG4gIHZhciBvZmZzZXQ7XG4gIGlmIChkYXRlU3RyaW5ncy50aW1lKSB7XG4gICAgdGltZSA9IHBhcnNlVGltZShkYXRlU3RyaW5ncy50aW1lKTtcbiAgICBpZiAoaXNOYU4odGltZSkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfVxuICBpZiAoZGF0ZVN0cmluZ3MudGltZXpvbmUpIHtcbiAgICBvZmZzZXQgPSBwYXJzZVRpbWV6b25lKGRhdGVTdHJpbmdzLnRpbWV6b25lKTtcbiAgICBpZiAoaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBkaXJ0eURhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lKTtcbiAgICAvLyBqcyBwYXJzZWQgc3RyaW5nIGFzc3VtaW5nIGl0J3MgaW4gVVRDIHRpbWV6b25lXG4gICAgLy8gYnV0IHdlIG5lZWQgaXQgdG8gYmUgcGFyc2VkIGluIG91ciB0aW1lem9uZVxuICAgIC8vIHNvIHdlIHVzZSB1dGMgdmFsdWVzIHRvIGJ1aWxkIGRhdGUgaW4gb3VyIHRpbWV6b25lLlxuICAgIC8vIFllYXIgdmFsdWVzIGZyb20gMCB0byA5OSBtYXAgdG8gdGhlIHllYXJzIDE5MDAgdG8gMTk5OVxuICAgIC8vIHNvIHNldCB5ZWFyIGV4cGxpY2l0bHkgd2l0aCBzZXRGdWxsWWVhci5cbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGUoMCk7XG4gICAgcmVzdWx0LnNldEZ1bGxZZWFyKGRpcnR5RGF0ZS5nZXRVVENGdWxsWWVhcigpLCBkaXJ0eURhdGUuZ2V0VVRDTW9udGgoKSwgZGlydHlEYXRlLmdldFVUQ0RhdGUoKSk7XG4gICAgcmVzdWx0LnNldEhvdXJzKGRpcnR5RGF0ZS5nZXRVVENIb3VycygpLCBkaXJ0eURhdGUuZ2V0VVRDTWludXRlcygpLCBkaXJ0eURhdGUuZ2V0VVRDU2Vjb25kcygpLCBkaXJ0eURhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUgKyBvZmZzZXQpO1xufVxudmFyIHBhdHRlcm5zID0ge1xuICBkYXRlVGltZURlbGltaXRlcjogL1tUIF0vLFxuICB0aW1lWm9uZURlbGltaXRlcjogL1taIF0vaSxcbiAgdGltZXpvbmU6IC8oW1orLV0uKikkL1xufTtcbnZhciBkYXRlUmVnZXggPSAvXi0/KD86KFxcZHszfSl8KFxcZHsyfSkoPzotPyhcXGR7Mn0pKT98VyhcXGR7Mn0pKD86LT8oXFxkezF9KSk/fCkkLztcbnZhciB0aW1lUmVnZXggPSAvXihcXGR7Mn0oPzpbLixdXFxkKik/KSg/Ojo/KFxcZHsyfSg/OlsuLF1cXGQqKT8pKT8oPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/JC87XG52YXIgdGltZXpvbmVSZWdleCA9IC9eKFsrLV0pKFxcZHsyfSkoPzo6PyhcXGR7Mn0pKT8kLztcbmZ1bmN0aW9uIHNwbGl0RGF0ZVN0cmluZyhkYXRlU3RyaW5nKSB7XG4gIHZhciBkYXRlU3RyaW5ncyA9IHt9O1xuICB2YXIgYXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLmRhdGVUaW1lRGVsaW1pdGVyKTtcbiAgdmFyIHRpbWVTdHJpbmc7XG5cbiAgLy8gVGhlIHJlZ2V4IG1hdGNoIHNob3VsZCBvbmx5IHJldHVybiBhdCBtYXhpbXVtIHR3byBhcnJheSBlbGVtZW50cy5cbiAgLy8gW2RhdGVdLCBbdGltZV0sIG9yIFtkYXRlLCB0aW1lXS5cbiAgaWYgKGFycmF5Lmxlbmd0aCA+IDIpIHtcbiAgICByZXR1cm4gZGF0ZVN0cmluZ3M7XG4gIH1cbiAgaWYgKC86Ly50ZXN0KGFycmF5WzBdKSkge1xuICAgIHRpbWVTdHJpbmcgPSBhcnJheVswXTtcbiAgfSBlbHNlIHtcbiAgICBkYXRlU3RyaW5ncy5kYXRlID0gYXJyYXlbMF07XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzFdO1xuICAgIGlmIChwYXR0ZXJucy50aW1lWm9uZURlbGltaXRlci50ZXN0KGRhdGVTdHJpbmdzLmRhdGUpKSB7XG4gICAgICBkYXRlU3RyaW5ncy5kYXRlID0gZGF0ZVN0cmluZy5zcGxpdChwYXR0ZXJucy50aW1lWm9uZURlbGltaXRlcilbMF07XG4gICAgICB0aW1lU3RyaW5nID0gZGF0ZVN0cmluZy5zdWJzdHIoZGF0ZVN0cmluZ3MuZGF0ZS5sZW5ndGgsIGRhdGVTdHJpbmcubGVuZ3RoKTtcbiAgICB9XG4gIH1cbiAgaWYgKHRpbWVTdHJpbmcpIHtcbiAgICB2YXIgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZS5leGVjKHRpbWVTdHJpbmcpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmcucmVwbGFjZSh0b2tlblsxXSwgJycpO1xuICAgICAgZGF0ZVN0cmluZ3MudGltZXpvbmUgPSB0b2tlblsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmc7XG4gICAgfVxuICB9XG4gIHJldHVybiBkYXRlU3RyaW5ncztcbn1cbmZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ14oPzooXFxcXGR7NH18WystXVxcXFxkeycgKyAoNCArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pfChcXFxcZHsyfXxbKy1dXFxcXGR7JyArICgyICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSkkKScpO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKHJlZ2V4KTtcbiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIHtcbiAgICB5ZWFyOiBOYU4sXG4gICAgcmVzdERhdGVTdHJpbmc6ICcnXG4gIH07XG4gIHZhciB5ZWFyID0gY2FwdHVyZXNbMV0gPyBwYXJzZUludChjYXB0dXJlc1sxXSkgOiBudWxsO1xuICB2YXIgY2VudHVyeSA9IGNhcHR1cmVzWzJdID8gcGFyc2VJbnQoY2FwdHVyZXNbMl0pIDogbnVsbDtcblxuICAvLyBlaXRoZXIgeWVhciBvciBjZW50dXJ5IGlzIG51bGwsIG5vdCBib3RoXG4gIHJldHVybiB7XG4gICAgeWVhcjogY2VudHVyeSA9PT0gbnVsbCA/IHllYXIgOiBjZW50dXJ5ICogMTAwLFxuICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKChjYXB0dXJlc1sxXSB8fCBjYXB0dXJlc1syXSkubGVuZ3RoKVxuICB9O1xufVxuZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGVTdHJpbmcsIHllYXIpIHtcbiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcbiAgaWYgKHllYXIgPT09IG51bGwpIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKGRhdGVSZWdleCk7XG4gIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCBzdHJpbmdcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciBpc1dlZWtEYXRlID0gISFjYXB0dXJlc1s0XTtcbiAgdmFyIGRheU9mWWVhciA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMV0pO1xuICB2YXIgbW9udGggPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzJdKSAtIDE7XG4gIHZhciBkYXkgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzNdKTtcbiAgdmFyIHdlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzRdKTtcbiAgdmFyIGRheU9mV2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNV0pIC0gMTtcbiAgaWYgKGlzV2Vla0RhdGUpIHtcbiAgICBpZiAoIXZhbGlkYXRlV2Vla0RhdGUoeWVhciwgd2VlaywgZGF5T2ZXZWVrKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICAgIHJldHVybiBkYXlPZklTT1dlZWtZZWFyKHllYXIsIHdlZWssIGRheU9mV2Vlayk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcbiAgICBpZiAoIXZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSB8fCAhdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoLCBNYXRoLm1heChkYXlPZlllYXIsIGRheSkpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG59XG5mdW5jdGlvbiBwYXJzZURhdGVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/IHBhcnNlSW50KHZhbHVlKSA6IDE7XG59XG5mdW5jdGlvbiBwYXJzZVRpbWUodGltZVN0cmluZykge1xuICB2YXIgY2FwdHVyZXMgPSB0aW1lU3RyaW5nLm1hdGNoKHRpbWVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBOYU47IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lXG5cbiAgdmFyIGhvdXJzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtaW51dGVzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1syXSk7XG4gIHZhciBzZWNvbmRzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1szXSk7XG4gIGlmICghdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cbiAgcmV0dXJuIGhvdXJzICogbWlsbGlzZWNvbmRzSW5Ib3VyICsgbWludXRlcyAqIG1pbGxpc2Vjb25kc0luTWludXRlICsgc2Vjb25kcyAqIDEwMDA7XG59XG5mdW5jdGlvbiBwYXJzZVRpbWVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwO1xufVxuZnVuY3Rpb24gcGFyc2VUaW1lem9uZSh0aW1lem9uZVN0cmluZykge1xuICBpZiAodGltZXpvbmVTdHJpbmcgPT09ICdaJykgcmV0dXJuIDA7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWV6b25lU3RyaW5nLm1hdGNoKHRpbWV6b25lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gMDtcbiAgdmFyIHNpZ24gPSBjYXB0dXJlc1sxXSA9PT0gJysnID8gLTEgOiAxO1xuICB2YXIgaG91cnMgPSBwYXJzZUludChjYXB0dXJlc1syXSk7XG4gIHZhciBtaW51dGVzID0gY2FwdHVyZXNbM10gJiYgcGFyc2VJbnQoY2FwdHVyZXNbM10pIHx8IDA7XG4gIGlmICghdmFsaWRhdGVUaW1lem9uZShob3VycywgbWludXRlcykpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIHJldHVybiBzaWduICogKGhvdXJzICogbWlsbGlzZWNvbmRzSW5Ib3VyICsgbWludXRlcyAqIG1pbGxpc2Vjb25kc0luTWludXRlKTtcbn1cbmZ1bmN0aW9uIGRheU9mSVNPV2Vla1llYXIoaXNvV2Vla1llYXIsIHdlZWssIGRheSkge1xuICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGlzb1dlZWtZZWFyLCAwLCA0KTtcbiAgdmFyIGZvdXJ0aE9mSmFudWFyeURheSA9IGRhdGUuZ2V0VVRDRGF5KCkgfHwgNztcbiAgdmFyIGRpZmYgPSAod2VlayAtIDEpICogNyArIGRheSArIDEgLSBmb3VydGhPZkphbnVhcnlEYXk7XG4gIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpO1xuICByZXR1cm4gZGF0ZTtcbn1cblxuLy8gVmFsaWRhdGlvbiBmdW5jdGlvbnNcblxuLy8gRmVicnVhcnkgaXMgbnVsbCB0byBoYW5kbGUgdGhlIGxlYXAgeWVhciAodXNpbmcgfHwpXG52YXIgZGF5c0luTW9udGhzID0gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5mdW5jdGlvbiBpc0xlYXBZZWFySW5kZXgoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQwMCA9PT0gMCB8fCB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXRlKSB7XG4gIHJldHVybiBtb250aCA+PSAwICYmIG1vbnRoIDw9IDExICYmIGRhdGUgPj0gMSAmJiBkYXRlIDw9IChkYXlzSW5Nb250aHNbbW9udGhdIHx8IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAyOSA6IDI4KSk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSB7XG4gIHJldHVybiBkYXlPZlllYXIgPj0gMSAmJiBkYXlPZlllYXIgPD0gKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDM2NiA6IDM2NSk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVdlZWtEYXRlKF95ZWFyLCB3ZWVrLCBkYXkpIHtcbiAgcmV0dXJuIHdlZWsgPj0gMSAmJiB3ZWVrIDw9IDUzICYmIGRheSA+PSAwICYmIGRheSA8PSA2O1xufVxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gIGlmIChob3VycyA9PT0gMjQpIHtcbiAgICByZXR1cm4gbWludXRlcyA9PT0gMCAmJiBzZWNvbmRzID09PSAwO1xuICB9XG4gIHJldHVybiBzZWNvbmRzID49IDAgJiYgc2Vjb25kcyA8IDYwICYmIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjAgJiYgaG91cnMgPj0gMCAmJiBob3VycyA8IDI1O1xufVxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lem9uZShfaG91cnMsIG1pbnV0ZXMpIHtcbiAgcmV0dXJuIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDw9IDU5O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwiaW1wb3J0IGNyZWF0ZVRvZG9EaXYgZnJvbSBcIi4vY3JlYXRlVG9kb0RpdlwiO1xuaW1wb3J0IHsgdXBkYXRlQ3VycmVudFByb2plY3QgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHNvcnRUb2RvcyBmcm9tIFwiLi9zb3J0VG9kb3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJvamVjdFNlbGVjdGlvbihpZCwgcHJvamVjdHMpIHtcbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGRpdi5jbGFzc0xpc3QgPSAncHJvamVjdEZvY3VzZWQnO1xuICAgIGxldCBuZXdDdXJyZW50UHJvamVjdCA9IHByb2plY3RzW2lkXTtcbiAgICBsZXQgZGlzcGxheURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGxUb2RvcycpO1xuICAgIGRpc3BsYXlEaXYuaW5uZXJIVE1MID0gJyc7XG5cbiAgICBuZXdDdXJyZW50UHJvamVjdCA9IHNvcnRUb2RvcyhuZXdDdXJyZW50UHJvamVjdCk7XG5cbiAgICBuZXdDdXJyZW50UHJvamVjdC50b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgICBjcmVhdGVUb2RvRGl2KHRvZG8pO1xuICAgIH0pO1xuXG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QobmV3Q3VycmVudFByb2plY3QpO1xuICAgIHJldHVybiBuZXdDdXJyZW50UHJvamVjdDtcbn0iLCJpbXBvcnQgeyBjb21wYXJlQXNjLCBmb3JtYXQsIHBhcnNlSVNPIH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0VG9kb3MoY3VycmVudFByb2plY3QpIHtcblxuICAgIGN1cnJlbnRQcm9qZWN0LnRvZG9zLnNvcnQoKGEsIGIpID0+IGNvbXBhcmVBc2MocGFyc2VJU08oYS5kYXRlKSwgcGFyc2VJU08oYi5kYXRlKSkpO1xuICAgIHJldHVybiBjdXJyZW50UHJvamVjdDtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGNvbXBhcmVBc2NcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gLTEsIDAgb3IgMS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIDEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYWZ0ZXIgdGhlIHNlY29uZCxcbiAqIC0xIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGJlZm9yZSB0aGUgc2Vjb25kIG9yIDAgaWYgZGF0ZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY29tcGFyZVxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNvbXBhcmVcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb25cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29tcGFyZSAxMSBGZWJydWFyeSAxOTg3IGFuZCAxMCBKdWx5IDE5ODk6XG4gKiBjb25zdCByZXN1bHQgPSBjb21wYXJlQXNjKG5ldyBEYXRlKDE5ODcsIDEsIDExKSwgbmV3IERhdGUoMTk4OSwgNiwgMTApKVxuICogLy89PiAtMVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBTb3J0IHRoZSBhcnJheSBvZiBkYXRlczpcbiAqIGNvbnN0IHJlc3VsdCA9IFtcbiAqICAgbmV3IERhdGUoMTk5NSwgNiwgMiksXG4gKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSxcbiAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApXG4gKiBdLnNvcnQoY29tcGFyZUFzYylcbiAqIC8vPT4gW1xuICogLy8gICBXZWQgRmViIDExIDE5ODcgMDA6MDA6MDAsXG4gKiAvLyAgIE1vbiBKdWwgMTAgMTk4OSAwMDowMDowMCxcbiAqIC8vICAgU3VuIEp1bCAwMiAxOTk1IDAwOjAwOjAwXG4gKiAvLyBdXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXBhcmVBc2MoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdCA9IHRvRGF0ZShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodCA9IHRvRGF0ZShkaXJ0eURhdGVSaWdodCk7XG4gIHZhciBkaWZmID0gZGF0ZUxlZnQuZ2V0VGltZSgpIC0gZGF0ZVJpZ2h0LmdldFRpbWUoKTtcbiAgaWYgKGRpZmYgPCAwKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7XG4gICAgcmV0dXJuIDE7XG4gICAgLy8gUmV0dXJuIDAgaWYgZGlmZiBpcyAwOyByZXR1cm4gTmFOIGlmIGRpZmYgaXMgTmFOXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRpZmY7XG4gIH1cbn0iLCJleHBvcnQgY29uc3QgY3JlYXRlUHJvamVjdCA9IChuYW1lLCBpZCkgPT4ge1xuICAgIHJldHVybiB7bmFtZSwgdG9kb3M6IFtdLCBpZH1cbn0iLCJpbXBvcnQgcHJvamVjdFNlbGVjdGlvbiBmcm9tIFwiLi9wcm9qZWN0U2VsZWN0aW9uXCI7XG5pbXBvcnQgeyBjcmVhdGVQcm9qZWN0IH0gZnJvbSBcIi4vY3JlYXRlUHJvamVjdFwiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFByb2plY3QgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgZ2V0UHJvamVjdHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IGRlbGV0ZVByb2plY3QgZnJvbSBcIi4vZGVsZXRlUHJvamVjdFwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0RGl2KHByb2plY3ROYW1lLCBpKSB7XG4gICAgXG4gICAgbGV0IG5ld1Byb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBuZXdQcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2FkZGVkUHJvamVjdCcpO1xuICAgIG5ld1Byb2plY3Quc2V0QXR0cmlidXRlKCdpZCcsIGkpO1xuXG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgcHJvamVjdFNlbGVjdGlvbihldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5pZCwgZ2V0UHJvamVjdHMoKSk7XG4gICAgfSlcblxuICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gJ3JlbW92ZS5wbmcnO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JlbW92ZUljb24nKTtcbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGkpO1xuICAgICAgICBkZWxldGVQcm9qZWN0KGkpO1xuICAgIH0pXG5cblxuICAgIG5ld1Byb2plY3QuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgbmV3UHJvamVjdC5hcHBlbmRDaGlsZChpbWcpO1xuXG5cblxuICAgIGxldCBhbGxQcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGxQcm9qZWN0cycpO1xuICAgIGFsbFByb2plY3RzLmFwcGVuZENoaWxkKG5ld1Byb2plY3QpO1xuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QocHJvamVjdE5hbWUsIGkpO1xuXG4gICAgcmV0dXJuIHByb2plY3Q7XG59IiwiaW1wb3J0IHsgZ2V0Q3VycmVudFByb2plY3QsIGdldFByb2plY3RzIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBwcm9qZWN0U2VsZWN0aW9uIGZyb20gXCIuL3Byb2plY3RTZWxlY3Rpb25cIjtcbmltcG9ydCB7IHVwZGF0ZVByb2plY3RzIH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IGNyZWF0ZVByb2plY3REaXYgfSBmcm9tIFwiLi9jcmVhdGVQcm9qZWN0RGl2XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoaWQpIHtcblxuICAgIGNvbnNvbGUubG9nKGlkKTtcbiAgICBsZXQgYWxsUHJvamVjdHMgPSBnZXRQcm9qZWN0cygpO1xuICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcbiAgICBsZXQgZGVsZXRlZFByb2plY3QgPSBhbGxQcm9qZWN0cy5maW5kSW5kZXgocHJvamVjdCA9PiBwcm9qZWN0LmlkID09IGlkKTtcbiAgICBhbGxQcm9qZWN0cy5zcGxpY2UoZGVsZXRlZFByb2plY3QsIDEpO1xuXG4gICAgdXBkYXRlUHJvamVjdHMoYWxsUHJvamVjdHMpOyAgICBcbiAgICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuXG5cbiAgICBsZXQgcHJvamVjdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGxQcm9qZWN0cycpO1xuICAgIHByb2plY3REaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGNyZWF0ZVByb2plY3REaXYocHJvamVjdC5uYW1lLCBpKTtcbiAgICAgICAgaSsrO1xuICAgIH0pO1xuXG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcblxufSIsImltcG9ydCB7Y3JlYXRlUHJvamVjdERpdn0gZnJvbSBcIi4vY3JlYXRlUHJvamVjdERpdlwiO1xuaW1wb3J0IHByb2plY3RTZWxlY3Rpb24gZnJvbSBcIi4vcHJvamVjdFNlbGVjdGlvblwiO1xuaW1wb3J0IGNyZWF0ZVRvZG9EaXYgZnJvbSAnLi9jcmVhdGVUb2RvRGl2JztcbmltcG9ydCB7IGNyZWF0ZVByb2plY3QgfSBmcm9tIFwiLi9jcmVhdGVQcm9qZWN0XCI7XG5pbXBvcnQge2NyZWF0ZVRvZG99IGZyb20gXCIuL2NyZWF0ZVRvZG9cIjtcbmltcG9ydCBkZWxldGVQcm9qZWN0IGZyb20gXCIuL2RlbGV0ZVByb2plY3RcIjtcblxuXG5sZXQgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpKSB8fCBbXTtcbmxldCBjdXJyZW50UHJvamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0JykpIHx8IGNyZWF0ZVByb2plY3QoJ2N1cnJlbnRQcm9qZWN0JywgMCk7XG5jb25zb2xlLmxvZyhwcm9qZWN0cyk7XG5cbmxldCBpID0gMDtcblxuXG5wcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgcHJvamVjdC5pZCA9IGk7XG4gICAgY3JlYXRlUHJvamVjdERpdihwcm9qZWN0Lm5hbWUsIGkpO1xuICAgIHByb2plY3RTZWxlY3Rpb24oY3VycmVudFByb2plY3QuaWQsIHByb2plY3RzKTtcbiAgICBpKys7XG59KTtcblxuXG5cbmxldCBwcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RCdXR0b24nKTtcbnByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Byb2plY3QnKS52YWx1ZSAhPSAnJykge1xuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3UHJvamVjdCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhpKTtcbiAgICAgICAgbGV0IHByb2plY3QgPSBjcmVhdGVQcm9qZWN0RGl2KHByb2plY3ROYW1lLnZhbHVlLCBpKTtcbiAgICAgICAgcHJvamVjdHMucHVzaChwcm9qZWN0KTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcbiAgICAgICAgcHJvamVjdE5hbWUudmFsdWUgPSAnJztcbiAgICAgICAgaSsrO1xuICAgIH1cbn0pO1xuXG5cbmxldCB0b2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9CdXR0b24nKTtcbnRvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3VGFzaycpLnZhbHVlICE9ICcnKSB7XG4gICAgICAgIGxldCBuZXdUb2RvID0gY3JlYXRlVG9kbygpO1xuICAgICAgICBjdXJyZW50UHJvamVjdC50b2Rvcy5wdXNoKG5ld1RvZG8pO1xuICAgICAgICBjcmVhdGVUb2RvRGl2KG5ld1RvZG8pO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgICAgICBwcm9qZWN0U2VsZWN0aW9uKGN1cnJlbnRQcm9qZWN0LmlkLCBwcm9qZWN0cywgZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJykudmFsdWUgPSAnRW50ZXIgdGFzayBuYW1lJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld1Rhc2snKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJykudmFsdWUgPSAnJztcbiAgICAgICAgfSksIHtvbmNlIDogdHJ1ZX07XG4gICAgfVxufSk7XG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgbGV0IHNlbGVjdGVkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RGb2N1c2VkJyk7XG4gICAgXG4gICAgaWYoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQgJiYgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGRlZFByb2plY3QnKSAmJiBzZWxlY3RlZERpdikge1xuICAgICAgICBsZXQgZGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0Rm9jdXNlZCcpO1xuICAgICAgICBkaXZzLmZvckVhY2goKGRpdikgPT4ge1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdCA9ICdhZGRlZFByb2plY3QnO1xuICAgICAgICB9KVxuICAgIH1cbn0pO1xuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRQcm9qZWN0KCkge1xuICAgIHJldHVybiBjdXJyZW50UHJvamVjdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2plY3RzKCkge1xuICAgIHJldHVybiBwcm9qZWN0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb2plY3RzKHVwZGF0ZWRQcm9qZWN0cykge1xuICAgIHByb2plY3RzID0gdXBkYXRlZFByb2plY3RzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ3VycmVudFByb2plY3QodXBkYXRlZFByb2plY3QpIHtcbiAgICBjdXJyZW50UHJvamVjdCA9IHVwZGF0ZWRQcm9qZWN0O1xufSIsImltcG9ydCB7IGdldEN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuXG5leHBvcnQgY29uc3QgY3JlYXRlVG9kbyA9ICgpID0+IHtcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdUYXNrJykudmFsdWU7XG4gICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlO1xuICAgIGxldCB1cmdlbmN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VyZ2VuY3knKS52YWx1ZTtcbiAgICBsZXQgaW5kZXggPSBnZXRDdXJyZW50UHJvamVjdCgpLnRvZG9zLmxlbmd0aDtcblxuICAgIHJldHVybiB7bmFtZSwgZGF0ZSwgdXJnZW5jeSwgaW5kZXh9XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY3JlYXRlVG9kb0RpdiIsInRvZG8iLCJuYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGF0ZSIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsInRleHRDb250ZW50IiwiaWQiLCJ0YXNrRGF0ZSIsInRhc2tVcmdlbmN5IiwidXJnZW5jeSIsImVkaXRJbWciLCJzcmMiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZWRpdEZvcm0iLCJuYW1lSW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJyZXF1aXJlZCIsImRhdGVJbnB1dCIsInVyZ2VuY3lJbnB1dCIsIm9wdGlvbjEiLCJ2YWx1ZSIsIm9wdGlvbjIiLCJhcHBlbmRDaGlsZCIsImVkaXRCdXR0b24iLCJuZXdOYW1lIiwibmV3RGF0ZSIsIm5ld1VyZ2VuY3kiLCJ1cGRhdGVUb2RvSW5mbyIsImJvZHkiLCJyZW1vdmVDaGlsZCIsIm92ZXJsYXkiLCJjdXJyZW50UHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsImNvbnNvbGUiLCJsb2ciLCJwcm9qZWN0U2VsZWN0aW9uIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImVkaXRUb2RvIiwicmVtb3ZlSW1nIiwiaW5kZXgiLCJ0b2RvSW5kZXgiLCJ0b2RvcyIsImZpbmQiLCJzcGxpY2UiLCJhbGxQcm9qZWN0cyIsImkiLCJmb3JFYWNoIiwiZGVsZXRlVG9kbyIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicmVxdWlyZWRBcmdzIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwidG9TdHJpbmciLCJEYXRlIiwiZ2V0VGltZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwiTWF0aCIsInBvdyIsIm1pbGxpc2Vjb25kc0luTWludXRlIiwibWlsbGlzZWNvbmRzSW5Ib3VyIiwicGFyc2VJU08iLCJvcHRpb25zIiwiX29wdGlvbnMkYWRkaXRpb25hbERpIiwiYWRkaXRpb25hbERpZ2l0cyIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJjZWlsIiwiZmxvb3IiLCJ0b0ludGVnZXIiLCJSYW5nZUVycm9yIiwiZGF0ZVN0cmluZ3MiLCJkYXRlU3RyaW5nIiwidGltZVN0cmluZyIsImFycmF5Iiwic3BsaXQiLCJwYXR0ZXJucyIsImRhdGVUaW1lRGVsaW1pdGVyIiwidGVzdCIsInRpbWVab25lRGVsaW1pdGVyIiwic3Vic3RyIiwidG9rZW4iLCJ0aW1lem9uZSIsImV4ZWMiLCJ0aW1lIiwicmVwbGFjZSIsInNwbGl0RGF0ZVN0cmluZyIsInBhcnNlWWVhclJlc3VsdCIsInJlZ2V4IiwiUmVnRXhwIiwiY2FwdHVyZXMiLCJtYXRjaCIsInllYXIiLCJyZXN0RGF0ZVN0cmluZyIsInBhcnNlSW50IiwiY2VudHVyeSIsInNsaWNlIiwicGFyc2VZZWFyIiwiZGF0ZVJlZ2V4IiwiaXNXZWVrRGF0ZSIsImRheU9mWWVhciIsInBhcnNlRGF0ZVVuaXQiLCJtb250aCIsImRheSIsIndlZWsiLCJkYXlPZldlZWsiLCJfeWVhciIsInZhbGlkYXRlV2Vla0RhdGUiLCJpc29XZWVrWWVhciIsInNldFVUQ0Z1bGxZZWFyIiwiZGlmZiIsImdldFVUQ0RheSIsInNldFVUQ0RhdGUiLCJnZXRVVENEYXRlIiwiZGF5T2ZJU09XZWVrWWVhciIsImRheXNJbk1vbnRocyIsImlzTGVhcFllYXJJbmRleCIsInZhbGlkYXRlRGF0ZSIsInZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSIsIm1heCIsInBhcnNlRGF0ZSIsIm9mZnNldCIsInRpbWVzdGFtcCIsInRpbWVSZWdleCIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VUaW1lIiwiZGlydHlEYXRlIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwic2V0SG91cnMiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwidGltZXpvbmVTdHJpbmciLCJ0aW1lem9uZVJlZ2V4Iiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJwYXJzZVRpbWV6b25lIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRCeUlkIiwibmV3Q3VycmVudFByb2plY3QiLCJpbm5lckhUTUwiLCJzb3J0IiwiYSIsImIiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdCIsImRhdGVSaWdodCIsImNvbXBhcmVBc2MiLCJzb3J0VG9kb3MiLCJ1cGRhdGVDdXJyZW50UHJvamVjdCIsImNyZWF0ZVByb2plY3QiLCJjcmVhdGVQcm9qZWN0RGl2IiwicHJvamVjdE5hbWUiLCJuZXdQcm9qZWN0Iiwic3BhbiIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImltZyIsImRlbGV0ZWRQcm9qZWN0IiwiZmluZEluZGV4IiwicHJvamVjdCIsInVwZGF0ZVByb2plY3RzIiwiZGVsZXRlUHJvamVjdCIsInBhcnNlIiwiZ2V0SXRlbSIsInVwZGF0ZWRQcm9qZWN0cyIsInVwZGF0ZWRQcm9qZWN0IiwicHVzaCIsIm5ld1RvZG8iLCJzZWxlY3RlZERpdiIsImNvbnRhaW5zIiwicXVlcnlTZWxlY3RvckFsbCJdLCJzb3VyY2VSb290IjoiIn0=